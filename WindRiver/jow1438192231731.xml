<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE task-wr PUBLIC "-//WindRiver.com//DTD DITA 1.2 Wind River General Task//EN" "task-wr.dtd">
<task-wr id="jow1438192231731" xml:lang="en-us">
<!-- Modification History
        
-->
    <title ixia_locid="1">Connecting Virtual Machines to External Networks</title>
    <shortdesc ixia_locid="2">You can provide VMs with external connectivity using one of several
        methods.</shortdesc>
    <prolog>
        <author ixia_locid="3">Jim Owens</author>
    </prolog>
    <taskbody>
        <context id="context_N1001F_N1001C_N10001" ixia_locid="4">
            <p ixia_locid="51">To connect VMs to external networks, you require an internal tenant
                network for the VMs, an external tenant network connected to an edge router, and a
                virtual router attached to both networks. </p>
            <p ixia_locid="55"><draft-comment author="jowens" ixia_locid="56">US62989 edited to include DNAT
                    method</draft-comment>You can use floating IP addresses, source network address
                translation (SNAT), or port-based destination network address translation (DNAT) to
                expose VMs to an external network. Alternatively, you can use an external NAT
                device, or use a network address space for the VMs that is directly visible from the
                external network.</p>
            <p ixia_locid="53">You can associate a floating IP address with a VM using a pool of
                available floating IP addresses configured by the system administrator. When a host
                on an external network initiates a connection to a public floating IP address, the
                virtual router updates a connection table to enable bidirectional traffic flow
                between the host and the VM. This approach requires a range of dedicated externally
                visible addresses.</p>
            <p ixia_locid="54">When SNAT is enabled, the virtual router uses a port-based network
                address translation table. Only one externally visible IP address is required; ports
                on this IP address are mapped to internal IP addresses and ports used by VMs.
                However, unless DNAT is also used, the table is  is updated only when a VM initiates
                connection to an external host. Until this happens, the VM is inaccessible from the
                external network. This is true even if the private IP address of the VM is used
                directly by incoming traffic.</p>
            <draft-comment author="rstone" ixia_locid="59">CGTS-3054 adds para</draft-comment>
            <p ixia_locid="60">In some cases, the use of virtual routers on the tenant networks can result in
                multiple default routes for a VM. If this happens, you can establish alternative VM
                access to the metadata server; see <xref href="psa1412702861873.xml#psa1412702861873/accessing_metadata_server" ixia_locid="61"/> for more
                information.</p>
            <p ixia_locid="57">When port-based DNAT (port forwarding) entries are added to the SNAT network address
                translation table, connections to VMs can be initiated externally.</p>
            <p ixia_locid="14">You can use floating IP addresses, SNAT, and DNAT in any combination.
                The following table presents an overview. </p>
            <table frame="all" id="table_wbq_4p1_ws" rowheader="firstcol">
                <tgroup cols="3">
                    <colspec colname="c1" colnum="1" colwidth="1.0*"/>
                    <colspec colname="c2" colnum="2" colwidth="1.0*"/>
                    <colspec colname="c3" colnum="3" colwidth="1.0*"/>
                    <thead>
                        <row>
                            <entry ixia_locid="15"/>
                            <entry ixia_locid="16">
                                <p ixia_locid="17">Floating IP disabled</p>
                            </entry>
                            <entry ixia_locid="18">
                                <p ixia_locid="19">Floating IP enabled</p>
                            </entry>
                        </row>
                    </thead>
                    <tbody>
                        <row>
                            <entry ixia_locid="20">
                                <p ixia_locid="21">SNAT disabled</p>
                            </entry>
                            <entry ixia_locid="22">
                                <p ixia_locid="23">VMs are directly accessible from the external
                                    network, provided the tenant network address space is directly
                                    visible from the external network, or NAT is implemented using a
                                    separate device.</p>
                            </entry>
                            <entry ixia_locid="24">
                                <p ixia_locid="25">VMs cannot initiate connections to the external
                                    network unless they have assigned floating IP addresses.
                                    External hosts can initiate connections to VMs that have
                                    assigned floating IP addresses.</p>
                            </entry>
                        </row>
                        <row>
                            <entry ixia_locid="26">
                                <p ixia_locid="27">SNAT enabled</p>
                            </entry>
                            <entry ixia_locid="28">
                                <p ixia_locid="29">VMs can initiate connections to the external
                                    network. External hosts cannot initiate connections to the VMs
                                    unless port-based DNAT is also used.</p>
                            </entry>
                            <entry ixia_locid="30">
                                <p ixia_locid="31">VMs can initiate connections to the external
                                    network. External hosts can initiate connections to VMs that
                                    have assigned floating IP addresses. </p>
                            </entry>
                        </row>
                    </tbody>
                </tgroup>
            </table>
            <p ixia_locid="32">To enable or disable SNAT, see <xref href="jow1438192116883.xml" ixia_locid="33"/>. To configure port-based DNAT, see <xref href="jow1445866870690.xml" ixia_locid="58"/>.</p>
            <p ixia_locid="34">To configure floating IP addresses for VMs, refer to the public
                OpenStack documentation.</p>
        </context>
    </taskbody>
</task-wr>