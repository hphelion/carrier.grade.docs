<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE task-wr PUBLIC "-//WindRiver.com//DTD DITA 1.2 Wind River General Task//EN" "task-wr.dtd">
<task-wr id="xqe1467035030589" xml:lang="en-us">
<!-- Modification History
        
-->
    <title ixia_locid="1">Configuring Remote Logging on Titanium Server</title>
    <shortdesc ixia_locid="2">To begin sending logs from Titanium Server to a remote log server, you
        must enable remote logging on the system, and then unlock each host to make the
        configuration change take effect.</shortdesc>
    <prolog>
        <author ixia_locid="73">Jim Owens</author>
        <author ixia_locid="3">Edward Knowlton</author>
    </prolog>
    <taskbody>
        <context id="context_N1001F_N1001C_N10001" ixia_locid="4">
            <p ixia_locid="5"><draft-comment author="jowens" ixia_locid="76">US77159 / US83068 new
                    topic</draft-comment>You must use the CLI to change the remote logging
                configuration. This operation is not supported using the web administration
                interface.</p>
        </context>
        <prereq id="prereq_N10054_N10023_N10001" ixia_locid="74">
            <p ixia_locid="75">A correctly configured remote log server is required. For more
                information, see <xref href="tal1467051884025.xml" ixia_locid="77"/>.</p>
        </prereq>
        <steps>
            <step id="step_N10048_N10045_N1001C_N10001" ixia_locid="12">
                <cmd ixia_locid="13">Log in to the active controller and become the Keystone admin user.</cmd>
                <stepxmp ixia_locid="14">
                    <codeblock ixia_locid="15"><systemoutput ixia_locid="16">$</systemoutput> <userinput ixia_locid="17">source /etc/nova/openrc</userinput></codeblock>
                </stepxmp>
            </step>
            <step id="step_N1005F_N10045_N1001C_N10001" ixia_locid="18">
                <cmd ixia_locid="19">Lock the standby controller.</cmd>
                <stepxmp ixia_locid="20">
                    <codeblock ixia_locid="21"><systemoutput ixia_locid="22">~(keystone_admin)$</systemoutput> <userinput ixia_locid="23">system host-lock controller-1</userinput></codeblock>
                </stepxmp>
            </step>
            <step id="step_N10076_N10045_N1001C_N10001" ixia_locid="24">
                <cmd ixia_locid="25"><draft-comment author="jowens" ixia_locid="113">US80148 simplify step; add TLS
                        option and note</draft-comment>Use the <cmdname ixia_locid="63">system
                        remotelogging-modify</cmdname> command to enable remote logging.</cmd>
                <info ixia_locid="78">
                    <p ixia_locid="79">Use a command of the following form:</p>
                    <codeblock ixia_locid="80">
<systemoutput ixia_locid="81">[~(keystone_admin)]$ </systemoutput> <userinput ixia_locid="82">system remotelogging-modify --ip_address  <varname ixia_locid="83">server_address</varname> \
--transport <varname ixia_locid="84">transport_mode</varname> --enabled <varname ixia_locid="85">state</varname></userinput></codeblock>
                    <p ixia_locid="86">where</p>
                    <dl>
                        <dlentry ixia_locid="87">
                            <dt ixia_locid="88"><varname ixia_locid="89">server_address</varname></dt>
                            <dd ixia_locid="90">
                                <p ixia_locid="91">is the IP address of the remote log server</p>
                            </dd>
                        </dlentry>
                        <dlentry ixia_locid="92">
                            <dt ixia_locid="93"><varname ixia_locid="94">transport_mode</varname></dt>
                            <dd ixia_locid="95">
                                <p ixia_locid="96">is the transport protocol to use. Valid values
                                    are <option ixia_locid="97">tcp</option>, <option ixia_locid="98"> udp</option>, or <option ixia_locid="114">tls</option>.</p>
                                <note id="note_N1004C_N10027_N10024_N10001" ixia_locid="61">
                                    <p ixia_locid="115">Currently the Remote Log Server certificate
                                        received by Titanium Server on negotiating a TLS connection
                                        is not authenticated, but is used for encryption.</p>
                                </note>
                            </dd>
                        </dlentry>
                        <dlentry ixia_locid="99">
                            <dt ixia_locid="100"><varname ixia_locid="101">state</varname></dt>
                            <dd ixia_locid="102">
                                <p ixia_locid="103">is <option ixia_locid="104">True</option> to enable logging, or
                                        <option ixia_locid="105">False</option> to disable logging</p>
                            </dd>
                        </dlentry>
                    </dl>
                </info>
                <stepxmp ixia_locid="26">
                    <p ixia_locid="106">For example:</p>
                    <codeblock ixia_locid="107">
<systemoutput ixia_locid="108">[~(keystone_admin)]$ </systemoutput> <userinput ixia_locid="109">system remotelogging-modify --ip_address 128.224.186.92 \
--transport tcp --enabled True</userinput>
<systemoutput ixia_locid="30">
+------------+--------------------------------------+
| Property   | Value                                |
+------------+--------------------------------------+
| uuid       | 36bccb60-d560-4f15-aadc-d626579225d3 |
| ip_address | 128.224.186.92                       |
| enabled    | True                                 |
| transport  | tcp                                  |
| port       | 514                                  |
| created_at | 2016-06-07T19:12:30.002272+00:00     |
| updated_at | None                                 |
+------------+--------------------------------------+</systemoutput>
</codeblock>
                </stepxmp>
            </step>
            <step id="step_N10093_N10045_N1001C_N10001" ixia_locid="31">
                <cmd ixia_locid="32">Unlock the standby controller.</cmd>
                <stepxmp ixia_locid="33">
                    <codeblock ixia_locid="34"><systemoutput ixia_locid="65">[~(keystone_admin)]$ </systemoutput> <userinput ixia_locid="36">system host-unlock controller-1</userinput></codeblock>
                </stepxmp>
            </step>
            <step id="step_N100AA_N10045_N1001C_N10001" ixia_locid="37">
                <cmd ixia_locid="38">Swact the controllers.</cmd>
                <stepxmp ixia_locid="39">
                    <codeblock ixia_locid="40"><systemoutput ixia_locid="66">[~(keystone_admin)]$ </systemoutput> <userinput ixia_locid="42">system host-swact controller-0</userinput></codeblock>
                </stepxmp>
            </step>
            <step id="step_N100C1_N10045_N1001C_N10001" ixia_locid="43">
                <cmd ixia_locid="44">Lock the new standby controller.</cmd>
                <stepxmp ixia_locid="45">
                    <codeblock ixia_locid="46"><systemoutput ixia_locid="67">[~(keystone_admin)]$ </systemoutput> <userinput ixia_locid="48">system host-lock controller-0</userinput>
<systemoutput ixia_locid="68">[~(keystone_admin)]$ </systemoutput> <userinput ixia_locid="50">system host-unlock controller-0</userinput></codeblock>
                </stepxmp>
            </step>
            <step id="step_N100E0_N10045_N1001C_N10001" ixia_locid="51">
                <cmd ixia_locid="52">Lock and unlock all other hosts.</cmd>
                <info ixia_locid="110">
                    <note id="note_N1018F_N1018C_N10182_N10049_N10024_N10001" ixia_locid="111" type="caution">
                        <p ixia_locid="112">Before locking a compute host, ensure that any hosted VMs are stopped or
                            migrated.</p>
                    </note>
                </info>
                <stepxmp ixia_locid="53">
                    <codeblock ixia_locid="54"><systemoutput ixia_locid="69">[~(keystone_admin)]$ </systemoutput> <userinput ixia_locid="56">system host-lock compute-1
</userinput>
<systemoutput ixia_locid="70">[~(keystone_admin)]$ </systemoutput> <userinput ixia_locid="58">system host-lock compute-0
</userinput>
<systemoutput ixia_locid="71">[~(keystone_admin)]$ </systemoutput> <userinput ixia_locid="60">system host-unlock compute-1
</userinput>
<systemoutput ixia_locid="72">[~(keystone_admin)]$ </systemoutput> <userinput ixia_locid="116">system host-unlock compute-0</userinput></codeblock>
                </stepxmp>
            </step>
        </steps>
    </taskbody>
</task-wr>