<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE task-wr PUBLIC "-//WindRiver.com//DTD DITA 1.2 Wind River General Task//EN" "task-wr.dtd">
<task-wr id="ekn1459533043686" xml:lang="en-us">
<!-- Modification History
        
-->
    <title ixia_locid="263">Viewing Active Alarms Using the CLI</title>
    <shortdesc ixia_locid="264">You can use the CLI to find information about currently active system
        alarms.</shortdesc>
    <prolog>
        <author ixia_locid="265">Edward Knowlton</author>
    </prolog>
    <taskbody>
        <prereq id="prereq_N1001F_N1001C_N10001" ixia_locid="266">
            <draft-comment author="eknowlto" ixia_locid="267">US70391: "FM: Merge Query/Display of Historical Alarms
                and Customer Logs"</draft-comment>
            <p ixia_locid="268">You must be logged in with administrative privileges.</p>
            <p ixia_locid="269">To acquire Keystone <nameliteral ixia_locid="270">admin</nameliteral>
                credentials, use the following command:</p>
            <codeblock ixia_locid="9"><systemoutput ixia_locid="10">$ </systemoutput><userinput ixia_locid="11">source /etc/nova/openrc</userinput></codeblock>
        </prereq>
        <section id="section_N10045_N1001C_N10001" ixia_locid="271">
            <p ixia_locid="272">You can view currently active alarms through the CLI using the commands: </p>
            <ul id="ul_uzw_bnw_mv">
                <li ixia_locid="273">
                    <p ixia_locid="274"><cmdname ixia_locid="275">system alarm-list [-q
                            &lt;QUERY&gt;] --include_suppress</cmdname></p>
                </li>
                <li ixia_locid="276">
                    <p ixia_locid="277"><cmdname ixia_locid="278">system alarm-show</cmdname></p>
                </li>
            </ul>
            <p ixia_locid="279">Examples and usage information for each of these commands is given below.</p>
        </section>
        <section id="section_N1006B_N1001C_N10001" ixia_locid="255">
            <title ixia_locid="256">Examples</title>
            <dl>
                <dlentry ixia_locid="257">
                    <dt ixia_locid="258">system alarm-list</dt>
                    <dd ixia_locid="259">
                        <p ixia_locid="6">The command <cmdname ixia_locid="99">system
                                alarm-list</cmdname> lists currently active alarms, as illustrated
                            below (the output is split in two pieces for presentation purposes
                            only). </p>
                        <p ixia_locid="12">This example lists a single critical alarm on host
                                <nameliteral ixia_locid="13">controller-0</nameliteral> regarding
                            running out of space on disk unit <filepath ixia_locid="14">/dev/sda3</filepath>. Each alarm object is listed with a unique
                            UUID which you can use to obtain additional information.</p>
                        <codeblock ixia_locid="8"><systemoutput ixia_locid="201">~(keystone_admin)$ </systemoutput><userinput ixia_locid="45">system alarm-list</userinput>
<systemoutput ixia_locid="202">
+--------------+----------+--------------------+----------+---------------
| UUID         | Alarm ID | Entity Instance ID | Severity |  Time Stamp   
+--------------+----------+--------------------+----------+---------------
| 4ab5698a-... | 100.104  | host=controller-0  | critical |  2014-06-25...
+--------------+----------+--------------------+----------+---------------

--+----------------------------------------------------------+
  | Reason Text                                              |
--+----------------------------------------------------------+
  | /dev/sda3 severity critical threshold set (0.00 MB left) |
--+----------------------------------------------------------+
</systemoutput></codeblock>
                        <p ixia_locid="124">You can use one of the following <option ixia_locid="126">--query</option> command filters to view specific
                            subsets of alarms, or a particular alarm:</p>
                        <simpletable frame="all" id="simpletable_pky_w5w_mv" relcolwidth="0.6* 1.0*">
                            <sthead>
                                <stentry ixia_locid="128">
                                    <p ixia_locid="130">Query Filter</p>
                                </stentry>
                                <stentry ixia_locid="132">
                                    <p ixia_locid="134">Comment</p>
                                </stentry>
                            </sthead>
                            <strow>
                                <stentry ixia_locid="136">
                                    <p ixia_locid="138"><cmdname ixia_locid="140">uuid=&lt;uuid&gt;</cmdname></p>
                                </stentry>
                                <stentry ixia_locid="142">
                                    <p ixia_locid="144">Query alarms by UUID, for example:</p>
                                    <codeblock ixia_locid="146"><systemoutput ixia_locid="203">$ </systemoutput><userinput ixia_locid="150">system alarm-list --query uuid=4ab5698a-19cb...</userinput></codeblock>
                                </stentry>
                            </strow>
                            <strow>
                                <stentry ixia_locid="152">
                                    <p ixia_locid="154"><cmdname ixia_locid="156">alarm_id=&lt;alarm
                                            id&gt;</cmdname></p>
                                </stentry>
                                <stentry ixia_locid="158">
                                    <p ixia_locid="160">Query alarms by alarm ID, for example:</p>
                                    <codeblock ixia_locid="162"><systemoutput ixia_locid="204">$ </systemoutput><userinput ixia_locid="166">system alarm-list --query alarm_id=100.104</userinput></codeblock>
                                </stentry>
                            </strow>
                            <strow>
                                <stentry ixia_locid="70">
                                    <p ixia_locid="71"><cmdname ixia_locid="72">alarm_type=&lt;type&gt;</cmdname></p>
                                </stentry>
                                <stentry ixia_locid="280">
                                    <p ixia_locid="281">Query alarms by type, for example:</p>
                                    <codeblock ixia_locid="75"><systemoutput ixia_locid="205">$ </systemoutput><userinput ixia_locid="48">system alarm-list --query \
alarm_type=operational-violation</userinput></codeblock>
                                </stentry>
                            </strow>
                            <strow>
                                <stentry ixia_locid="76">
                                    <p ixia_locid="77"><cmdname ixia_locid="78">entity_type_id=&lt;type id&gt;</cmdname></p>
                                </stentry>
                                <stentry ixia_locid="79">
                                    <p ixia_locid="80">Query alarms by entity type ID, for
                                        example:</p>
                                    <codeblock ixia_locid="81"><systemoutput ixia_locid="206">$ </systemoutput><userinput ixia_locid="49">system alarm-list --query \
entity_type_id=system.host </userinput></codeblock>
                                </stentry>
                            </strow>
                            <strow>
                                <stentry ixia_locid="82">
                                    <p ixia_locid="83"><cmdname ixia_locid="84">entity_instance_id=&lt;instance id&gt;</cmdname></p>
                                </stentry>
                                <stentry ixia_locid="85">
                                    <p ixia_locid="86">Query alarms by entity instance id, for
                                        example:</p>
                                    <codeblock ixia_locid="87"><systemoutput ixia_locid="207">$ </systemoutput><userinput ixia_locid="50">system alarm-list --query \
entity_instance_id=host=compute-0</userinput></codeblock>
                                </stentry>
                            </strow>
                            <strow>
                                <stentry ixia_locid="88">
                                    <p ixia_locid="89"><cmdname ixia_locid="90">severity=&lt;severity&gt;</cmdname></p>
                                </stentry>
                                <stentry ixia_locid="91">
                                    <p ixia_locid="92">Query alarms by severity type, for
                                        example:</p>
                                    <codeblock ixia_locid="93"><systemoutput ixia_locid="208">$ </systemoutput><userinput ixia_locid="51">system alarm-list --query severity=warning</userinput></codeblock>
                                    <p ixia_locid="94">The valid severity types are <term ixia_locid="95">critical</term>, <term ixia_locid="96">major</term>, <term ixia_locid="97">minor</term>, and
                                            <term ixia_locid="98">warning</term>.</p>
                                </stentry>
                            </strow>
                        </simpletable>
                        <p ixia_locid="168">Query command filters can be combined into a single
                            expression separated by semicolons, as illustrated in the following
                            example:</p>
                        <codeblock ixia_locid="169"><systemoutput ixia_locid="209">$ </systemoutput><userinput ixia_locid="171">system alarm-list -q 'alarm_id=400.002;entity_instance_id=service_domain=controller.service_group=directory-services'</userinput></codeblock>
                        <draft-comment author="eknowlto" ixia_locid="282">US79047 - Alarm Suppression</draft-comment>
                        <p ixia_locid="283">You can also use the <option ixia_locid="284">--include_suppress</option> option. This option indicates that all
                            active alarms should be displayed, including suppressed alarms.
                            Suppressed alarms are displayed with their Alarm ID set to <nameliteral ixia_locid="285">S</nameliteral><varname ixia_locid="286">(alarm-id)</varname></p>
                    </dd>
                </dlentry>
                <dlentry ixia_locid="260">
                    <dt ixia_locid="261">system alarm-show</dt>
                    <dd ixia_locid="262">
                        <p ixia_locid="16">The command <cmdname ixia_locid="100">system
                                alarm-show</cmdname> presents additional information about a
                            currently active alarm, as illustrated below:</p>
                        <codeblock ixia_locid="101"><systemoutput ixia_locid="210">~(keystone_admin)$ </systemoutput><userinput ixia_locid="105">system alarm-show 4ab5698a-19cb-4c17-bd63-302173fef62c </userinput>
<systemoutput ixia_locid="211">
+------------------------+-------------------------------------------------+
| Property               | Value                                           |
+------------------------+-------------------------------------------------+
| alarm_id               | 100.104                                         |
| alarm_state            | set                                             |
| alarm_type             | operational-violation                           |
| entity_instance_id     | system=hp380-1_4.host=controller-0              |
| entity_type_id         | system.host                                     |
| probable_cause         | threshold-crossed                               |
| proposed_repair_action | /dev/sda3 check usage                           |
| reason_text            | /dev/sda3 critical threshold set (0.00 MB left) |
| service_affecting      | False                                           |
| severity               | critical                                        |
| suppression            | True                                            |
| timestamp              | 2014-06-25T16:58:57.324613                      |
| uuid                   | 4ab5698a-19cb-4c17-bd63-302173fef62c            |
+------------------------+-------------------------------------------------+</systemoutput></codeblock>
                        <p ixia_locid="107">The pair of attributes <nameliteral ixia_locid="23">(alarm_id, entity_instance_id)</nameliteral> uniquely identifies an
                            active alarm:</p>
                        <dl>
                            <dlentry ixia_locid="24">
                                <dt ixia_locid="25"><nameliteral ixia_locid="26">alarm_id</nameliteral></dt>
                                <dd ixia_locid="27">
                                    <p ixia_locid="28">An ID identifying the particular alarm
                                        condition. Note that there are some alarm conditions, such
                                        as <i ixia_locid="29">administratively locked</i>, that can
                                        be raised by more than one entity-instance-id.</p>
                                </dd>
                            </dlentry>
                            <dlentry ixia_locid="30">
                                <dt ixia_locid="31"><nameliteral ixia_locid="32">entity_instance_id</nameliteral></dt>
                                <dd ixia_locid="33">
                                    <p ixia_locid="34">Type and instance information of the object
                                        raising the alarm. A period-separated list of (key, value)
                                        pairs, representing the containment structure of the overall
                                        entity instance. This structure is used for processing
                                        hierarchical clearing of alarms.</p>
                                </dd>
                            </dlentry>
                        </dl>
                    </dd>
                </dlentry>
            </dl>
        </section>
    </taskbody>
</task-wr>