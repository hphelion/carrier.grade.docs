<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE task-wr PUBLIC "-//WindRiver.com//DTD DITA 1.2 Wind River General Task//EN" "task-wr.dtd">
<task-wr id="jow1425236723556" xml:lang="en-us">
<!-- Modification History
        
-->
    <title ixia_locid="1">Pinning a Guest NUMA Node to a Host NUMA Node</title>
    <shortdesc ixia_locid="2">You can use flavor extra specs or image properties to pin a guest NUMA
        node to a host NUMA node.</shortdesc>
    <prolog>
        <author ixia_locid="3">Jim Owens</author>
    </prolog>
    <taskbody>
        <context id="context_N1001F_N1001C_N10001" ixia_locid="4">
            <p ixia_locid="5">By default, when instances are launched or migrated, the virtual NUMA
                nodes defined for the VMs are mapped to available host NUMA nodes. You can
                optionally designate a specific host NUMA node for a virtual NUMA node, using either
                a flavor extra specification (which takes the general form <nameliteral ixia_locid="93">hw:specification</nameliteral>), or an image property (which
                takes the general form <nameliteral ixia_locid="94">hw_specification</nameliteral>).
                This enables you to co-locate VM processes with AVS vSwitch processes for
                high-performance networking. </p>
            <p ixia_locid="72"><!-- For information about exposing multiple NUMA nodes to a VM, see <xref
                    href="jow1425236666266.xml"/>. -->For
                information about assigning vSwitch processes to host NUMA nodes, see <ph ixia_locid="323" otherprops="printonly"><cite ixia_locid="324">Titanium Server System Administration: </cite></ph><cite ixia_locid="325"><ph ixia_locid="326"><xref href="jow1404333768530.xml" ixia_locid="327"/></ph></cite>.</p>
            <p ixia_locid="319">For a VM with only one virtual NUMA node, you can use an extra specification to
                specify the host NUMA node.
                <!--This is the Horizon-based implementation of the old way of assigning NUMA nodes, still extant. Presumably Horizon will be updated later to reflect the changes in NUMA node handling that inspired the current topic and related topics covering US51010. -->
                To add this extra spec to a flavor using the web administration interface, use the
                    <uicontrol ixia_locid="314">NUMA Node</uicontrol> selection in the <uicontrol ixia_locid="316">Create Flavor Extra Spec</uicontrol> drop-down menu. This
                provides fields to associate a <uicontrol ixia_locid="320">Guest NUMA Node</uicontrol> with a
                    <uicontrol ixia_locid="321">Host NUMA Node</uicontrol>. To access this menu, see <xref href="jow1429538642910.xml" ixia_locid="318"/>.</p>
            <p ixia_locid="78">You can also pin NUMA nodes using the CLI.  The following extra
                specification assigns a specific host NUMA node to a virtual NUMA node:</p>
            <codeblock ixia_locid="52">hw:numa_node.<varname ixia_locid="53">vnode_id</varname>=<varname ixia_locid="54">pnode_id</varname></codeblock>
            <p ixia_locid="55">where</p>
            <parml>
                <plentry ixia_locid="56">
                    <pt ixia_locid="57"><parmname ixia_locid="58">vnode_id</parmname></pt>
                    <pd ixia_locid="59">
                        <p ixia_locid="60">is the number used to identify the virtual NUMA node (0
                            for the first node, 1 for the second, and so on).</p>
                    </pd>
                </plentry>
                <plentry ixia_locid="61">
                    <pt ixia_locid="62"><parmname ixia_locid="63">pnode_id</parmname></pt>
                    <pd ixia_locid="64">
                        <p ixia_locid="65">is the number used to identify the host NUMA node (0 for
                            the first node, 1 for the second, and so on).</p>
                    </pd>
                </plentry>
            </parml>
            <p ixia_locid="67">For example, given flavor <nameliteral ixia_locid="68">numa.pinned.asym</nameliteral>, use the following command to assign virtual
                NUMA node 0 to host NUMA node 1:</p>
            <codeblock ixia_locid="69"><systemoutput ixia_locid="70">~(keystone_admin)$ </systemoutput><userinput ixia_locid="71">nova flavor-key numa.pinned.asym set hw:numa_node.0=1</userinput></codeblock>
            <note conref="jow1453048538675.xml#jow1453048538675/note_N10013_N10011_N10001" id="note_N100C1_N10022_N1001F_N10001" ixia_locid="322"/>
        </context>
    </taskbody>
</task-wr>