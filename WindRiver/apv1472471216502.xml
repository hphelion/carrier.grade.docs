<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE task-wr PUBLIC "-//WindRiver.com//DTD DITA 1.2 Wind River General Task//EN" "task-wr.dtd">
<task-wr id="apv1472471216502" xml:lang="en-us">
<!-- Modification History
        
-->
    <title ixia_locid="1">Rolling Back a Software Upgrade Before the Second Controller
        Upgrade</title>
    <shortdesc ixia_locid="2">You can perform an inservice abort of an upgrade before the second
        Controller (controller-0 in the examples of this procedure) have been upgraded.</shortdesc>
    <prolog>
        <author ixia_locid="3">Edward Knowlton</author>
    </prolog>
    <taskbody>
        <context id="context_N1001F_N1001C_N10001" ixia_locid="4">
            <p ixia_locid="5">The upgrade is aborted as follows: </p>
        </context>
        <steps>
            <step id="step_N1002B_N10028_N1001C_N10001" ixia_locid="6">
                <cmd ixia_locid="7">Abort the upgrade with the <cmdname ixia_locid="8">upgrade-abort</cmdname> command. </cmd>
                <stepxmp ixia_locid="9">
                    <codeblock ixia_locid="10"><systemoutput ixia_locid="11">$</systemoutput> <userinput ixia_locid="12">system upgrade-abort</userinput></codeblock>
                </stepxmp>
                <info ixia_locid="13">
                    <p ixia_locid="14">The upgrade state is set to aborting. Once this is executed, there is no
                        cancelling; the upgrade must be completely aborted. </p>
                </info>
            </step>
            <step id="step_N1004E_N10028_N1001C_N10001" ixia_locid="15">
                <cmd ixia_locid="16">Make controller-0 active.</cmd>
                <stepxmp ixia_locid="17">
                    <codeblock ixia_locid="18"><systemoutput ixia_locid="19">$</systemoutput> <userinput ixia_locid="20">system host-swact controller-1</userinput></codeblock>
                </stepxmp>
                <info ixia_locid="21">
                    <p ixia_locid="22">If controller-1 was active with the new upgrade release, swacting back to
                        controller-0 will switch back to using the previous release databases, which
                        were frozen at the time of the swact to controller-1. Any changes to the
                        system that were made while controller-1 was active will be lost. </p>
                </info>
            </step>
            <step id="step_N1006D_N10028_N1001C_N10001" ixia_locid="23">
                <cmd ixia_locid="124">Lock and downgrade controller-1.</cmd>
                <stepxmp ixia_locid="125">
                    <codeblock ixia_locid="26"><systemoutput ixia_locid="126">$</systemoutput> <userinput ixia_locid="127">system host-lock controller-1</userinput>
<systemoutput ixia_locid="128">$</systemoutput> <userinput ixia_locid="28">system host-downgrade controller-1</userinput></codeblock>
                </stepxmp>
                <info ixia_locid="29">
                    <p ixia_locid="30">The host is re-installed with the previous release load. </p>
                </info>
            </step>
            <step id="step_N1008C_N10028_N1001C_N10001" ixia_locid="31">
                <cmd ixia_locid="32">Unlock controller-1.</cmd>
                <stepxmp ixia_locid="129">
                    <codeblock ixia_locid="130"><systemoutput ixia_locid="122">$</systemoutput> <userinput ixia_locid="123">system host-unlock controller-1</userinput>
</codeblock>
                </stepxmp>
            </step>
            <step id="step_N10095_N10028_N1001C_N10001" ixia_locid="33">
                <cmd ixia_locid="34">Complete the upgrade. </cmd>
                <stepxmp ixia_locid="35">
                    <codeblock ixia_locid="36"><systemoutput ixia_locid="37">$</systemoutput> <userinput ixia_locid="38">system upgrade-complete</userinput></codeblock>
                </stepxmp>
                <info ixia_locid="39">
                    <p ixia_locid="40">This cleans up configuration, databases, and so forth, related to the aborted
                        upgrade. The upgrade record is deleted since upgrade is no longer in
                        progress. </p>
                </info>
            </step>
            <step id="step_N100B4_N10028_N1001C_N10001" ixia_locid="41">
                <cmd ixia_locid="42">Delete the newer upgrade release that has been aborted. </cmd>
                <stepxmp ixia_locid="43">
                    <codeblock ixia_locid="44"><systemoutput ixia_locid="45">$</systemoutput> <userinput ixia_locid="46">system load-delete <varname ixia_locid="131">loadID</varname></userinput></codeblock>
                </stepxmp>
            </step>
        </steps>
    </taskbody>
</task-wr>