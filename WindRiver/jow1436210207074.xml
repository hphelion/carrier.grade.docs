<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE task-wr PUBLIC "-//WindRiver.com//DTD DITA 1.2 Wind River General Task//EN" "task-wr.dtd">
<task-wr id="jow1436210207074" xml:lang="en-us">
<!-- Modification History
        
-->
    <title ixia_locid="34">Affining a VM to a NUMA Node with a vSwitch Core</title>
    <shortdesc ixia_locid="35">You can select whether to place a VM in the same NUMA node as a
        vSwitch (AVS) core.</shortdesc>
    <prolog>
        <author ixia_locid="36">Jim Owens</author>
    </prolog>
    <taskbody>
        <context id="context_N1001F_N1001C_N10001" ixia_locid="37">
            <p ixia_locid="38">For optimal networking performance, you can set an extra spec so that
                a VM is instantiated on a host only if the host can offer a NUMA node with at least
                one core assigned as a vSwitch. You can optionally specify best-effort placement, so
                that if a suitable host is unavailable, the VM is still instantiated, but using a
                NUMA node without a vSwitch core.</p>
            <p ixia_locid="42">To add this extra spec to a flavor using the web administration
                interface, use the <nameliteral ixia_locid="43">Vswitch NUMA Affinity</nameliteral>
                selection in the <nameliteral ixia_locid="44">Create Flavor Extra Spec</nameliteral>
                drop-down menu. To access this menu, see <xref href="jow1429538642910.xml" ixia_locid="45"/>.</p>
            <p ixia_locid="46">You can also specify the extra spec from the CLI by setting the following parameter
                for a flavor:</p>
            <codeblock ixia_locid="47"><userinput ixia_locid="22">hw:wrs:vswitch_numa_affinity=<varname ixia_locid="23">vswitch_affinity</varname></userinput></codeblock>
            <p ixia_locid="24">where <varname ixia_locid="25">vswitch_affinity</varname> is one of
                the following:</p>
            <dl>
                <dlentry ixia_locid="26">
                    <dt ixia_locid="27">strict</dt>
                    <dd ixia_locid="28">
                        <p ixia_locid="29">Requires a host NUMA node that has a vSwitch core. For a
                            VM configured to use multiple NUMA nodes, each host NUMA node must have
                            a vSwitch core. If these conditions cannot be satisfied, the
                            instantiation fails.</p>
                    </dd>
                </dlentry>
                <dlentry ixia_locid="30">
                    <dt ixia_locid="31">prefer</dt>
                    <dd ixia_locid="32">
                        <p ixia_locid="33">Prefers a host NUMA node that has a vSwitch core. For a
                            VM configured to use multiple NUMA nodes,  prefers host NUMA nodes with
                            a vSwitch core for as many virtual NUMA nodes as possible. If these
                            conditions cannot be satisfied, another NUMA node can be used.</p>
                    </dd>
                </dlentry>
            </dl>
            <p ixia_locid="48">For information about assigning vSwitch cores on a host, see <ph ixia_locid="51" otherprops="printonly"><cite ixia_locid="52">Titanium Server System Administration: </cite></ph><cite ixia_locid="53"><ph ixia_locid="54"><xref href="jow1404333768530.xml" ixia_locid="55"/></ph></cite>.</p>
            <note conref="jow1453048538675.xml#jow1453048538675/note_N10013_N10011_N10001" id="note_N10091_N10022_N1001F_N10001" ixia_locid="50"/>
        </context>
    </taskbody>
</task-wr>