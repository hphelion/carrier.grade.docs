<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE task-wr PUBLIC "-//WindRiver.com//DTD DITA 1.2 Wind River General Task//EN" "task-wr.dtd">
<task-wr id="jow1438192116883" xml:lang="en-us">
<!-- Modification History
        
-->
    <title ixia_locid="1">Configuring SNAT on a Virtual Router</title>
    <shortdesc ixia_locid="2">You can enable or disable source network address translation (SNAT)
        for each individual external network connection on a virtual router. By default, SNAT is
        enabled for all external networks.</shortdesc>
    <prolog>
        <author ixia_locid="3">Jim Owens</author>
    </prolog>
    <taskbody>
        <context id="context_N10022_N1001F_N10001" ixia_locid="109">
            <p ixia_locid="71"><draft-comment author="jowens" ixia_locid="112">US62989 introductory
                    paragraphs edited to contrast with DNAT</draft-comment>Both SNAT and port-based
                DNAT (destination network address translation) use tables to translate between IP
                addresses and ports used on an internal network, and an IP address and multiple
                ports used on an external network. However, SNAT provides translation for internally
                initiated UDP and TCP traffic flows only. An instance connected to an internal
                tenant network can initiate connections to servers on an external, usually public,
                network, but external servers cannot initiate connections to external addresses
                mapped to internal addresses. For externally initiated connections, the use of
                floating IP addresses or port-based DNAT is required. For more about DNAT, see <xref href="jow1445866870690.xml" ixia_locid="113"/>.</p>
            <p ixia_locid="75">System administrators can enable or disable SNAT using the following
                command:</p>
            <codeblock ixia_locid="76"><systemoutput ixia_locid="77">~(keystone_admin)$ </systemoutput><userinput ixia_locid="78">neutron router-update <varname ixia_locid="79">routername</varname> --external_gateway_info type=dict \
network_id=<varname ixia_locid="80">externalnetwork</varname>,enable_snat=<varname ixia_locid="81">boolean</varname></userinput></codeblock>
            <p ixia_locid="82">where:</p>
            <parml>
                <plentry ixia_locid="83">
                    <pt ixia_locid="84"><varname ixia_locid="85">routername</varname></pt>
                    <pd ixia_locid="86">
                        <p ixia_locid="87">is the name or UUID of the virtual router</p>
                    </pd>
                </plentry>
                <plentry ixia_locid="88">
                    <pt ixia_locid="89"><varname ixia_locid="90">externalnetwork</varname></pt>
                    <pd ixia_locid="91">
                        <p ixia_locid="92">is the name or UUID of the external network</p>
                    </pd>
                </plentry>
                <plentry ixia_locid="93">
                    <pt ixia_locid="94"><varname ixia_locid="95">boolean</varname></pt>
                    <pd ixia_locid="96">
                        <p ixia_locid="97">is <option ixia_locid="98">true</option> (to enable SNAT)
                            or <option ixia_locid="99">false</option> (to disable SNAT)</p>
                    </pd>
                </plentry>
            </parml>
            <note id="note_N100A7_N10022_N1001F_N10001" ixia_locid="100" type="caution">
                <p ixia_locid="101">For SNMP implemented on guests, the following limitations apply
                    when SNAT is enabled:</p>
                <ul id="ul_h2h_czk_xs">
                    <li ixia_locid="102">
                        <p ixia_locid="103">An SNMP agent on an internal network cannot receive
                            requests from SNMP managers on external networks.</p>
                    </li>
                    <li ixia_locid="104">
                        <p ixia_locid="105">An SNMP manager on an internal network cannot receive
                            traps from SNMP agents on external networks, even if communication is
                            initiated by the manager. This is because SNMP traps are sent to UDP
                            port 162, not to the source port.</p>
                    </li>
                </ul>
                <p ixia_locid="110">Only agent responses to requests from a manager on the internal
                    network are processed appropriately.</p>
                <p ixia_locid="111">To overcome these limitations, you can use floating IP addresses
                    or make internal addresses public. For more information, see <ph ixia_locid="114" otherprops="printonly"><cite ixia_locid="115">Titanium Server Cloud Administration: </cite></ph><cite ixia_locid="116"><ph ixia_locid="117"><xref href="jow1438192231731.xml" ixia_locid="118"/></ph></cite>.</p>
            </note>
        </context>
    </taskbody>
</task-wr>