<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE task-wr PUBLIC "-//WindRiver.com//DTD DITA 1.2 Wind River General Task//EN" "task-wr.dtd">
<task-wr id="jow1413727075983" xml:lang="en-us">
<!-- Modification History
        
-->
    <title>Changing Storage Space Allotments on the Controller</title>
    <shortdesc>You can change the allotments for controller-based storage at any
        time after installation. This includes the space allotted for database, image, and backup
        storage, and for clusters using an LVM backend, the space allotted for Cinder volume
        storage.</shortdesc>
    <prolog><author/>
       
    </prolog>
    <taskbody>
        <context id="context_N1001F_N1001C_N10001">
            <note id="note_N10096_N10022_N1001F_N10001">
                <p>Cinder volume storage is allotted using 3PAR, not on the
                    controller node..</p>
            </note>
            <p>During software installation, HP Helion OpenStack Carrier Grade is configured with the
                following storage allotments.</p>
            <dl>
                <dlentry>
                    <dt>Database storage</dt>
                    <dd>
                        <p>The storage allotment for the OpenStack database.</p>
                    </dd>
                </dlentry>
                <dlentry>
                    <dt>Image storage</dt>
                    <dd>
                        <p>The size of the partition to use for image storage.</p>
                    </dd>
                </dlentry>
                <dlentry>
                    <dt>Backup storage</dt>
                    <dd>
                        <p>The storage allotment for backup operations.</p>
                    </dd>
                </dlentry>
                <dlentry>
                    <dt>Volume storage</dt>
                    <dd>
                        <p>For a system using LVM storage, the storage allotment
                            for all Cinder volumes used by guest instances.</p>
                    </dd>
                </dlentry>
            </dl>
            <p>You can change these allotments using the <wintitle>System Configuration</wintitle> controls in the web administration interface,
                or using the CLI. For CLI instructions, see <xref href="jow1413729179585.xml"/>.</p>
            <p>To accommodate the changes, there must be enough disk space on the
                controller, including headroom needed to complete the operation. The headroom
                required is 45 GiB on the primary disk for a cluster using an LVM backend, or 65 GiB
                for a cluster using a 3PAR backend. This is in addition to the space required for
                the new allotments. The requested changes are checked against available space on the
                affected disks; if there is not enough, the changes are disallowed.</p>
            <p>To provide more space, you can replace the affected disk or disks.
                Database, image, and backup storage use space on the primary disk. Cinder volume
                storage (on a cluster with an LVM backend) uses space on a disk selected by device
                node number during controller configuration. The replacement disk must occupy the
                same device node number. Changes to the Cinder volume storage may also affect the
                primary disk because of the headroom requirement.</p>
            <p>To pass the disk-space checks, any replacement disks must be
                installed before the allotments are changed.</p>
            <note id="note_N100A9_N10022_N1001F_N10001" type="caution">
                <p> The configurations for <nameliteral>controller-0</nameliteral> and <nameliteral>controller-1</nameliteral> must be identical. If you make changes to one,
                    you must make the same changes to the other.</p>
            </note>
            <p>Changes to the storage allotments require a reinstallation of the
                HP Helion OpenStack Carrier Grade host software on the controllers, even if the primary disk is not
                replaced.</p>
            <note conref="rst1432737677834.xml#rst1432737677834/note_N10195_N10154_N1001F_N10001" id="note_N10195_N10154_N1001F_N10001"/>                                            
        </context>
        <prereq id="prereq_N10022_N1001F_N10001">
            <p>Before changing storage allotments, prepare as follows:</p>
            <ul id="ul_p3d_2h5_vp">
                <li>
                    <p>Calculate your system storage requirements. Include the headroom required for
                        changes to the storage space allotments.</p>
                </li>
                <li>
                    <p>Record the current configuration settings in case they need
                        to be restored (for example, because of an unexpected interruption during
                        changes to the system configuration). Consult the configuration plan for
                        your system.</p>
                </li>
            </ul>
        </prereq>
        <steps>
            <step id="step_N100F4_N100F1_N1001F_N10001">
                <cmd>If necessary, install replacement disks in the controllers.</cmd>
                <info>
                    <p>If you do not need to replace disks, you can skip this step. To determine
                        whether you need to replace disks, calculate your storage requirements. Be
                        sure to include the headroom required on the primary disk.</p>
                    <p>To replace disks in the controllers, follow these steps.</p>
                </info>
                <substeps id="substeps_wzh_2kt_4q">
                    <substep>
                        <cmd>Lock the standby controller.</cmd>
                    </substep>
                    <substep>
                        <cmd>Power down the standby controller.</cmd>
                    </substep>
                    <substep>
                        <cmd>Make any required hardware changes.</cmd>
                    </substep>
                    <substep>
                        <cmd>Power up the standby controller.</cmd>
                    </substep>
                    <substep>
                        <cmd>Reinstall the HP Helion OpenStack Carrier Grade software on the standby controller.</cmd>
                    </substep>
                    <substep>
                        <cmd>Unlock the standby controller.</cmd>
                    </substep>
                    <substep>
                        <cmd>Swact the controllers.</cmd>
                    </substep>
                    <substep>
                        <cmd>Repeat these steps for the new standby
                            controller.</cmd>
                    </substep>
                </substeps>
            </step>
            <step id="step_N101EF_N100F1_N1001F_N10001">
                <cmd>Edit the disk storage allotments.</cmd>
                <substeps id="substeps_kvh_bh5_4q">
                    <substep>
                        <cmd>In the HP Helion OpenStack Carrier Grade web administration interface, open the <wintitle>System Configuration</wintitle> pane.</cmd>
                        <info>
                            <p> The <wintitle>System
                                    Configuration</wintitle> pane is available from the <uicontrol>System Panel</uicontrol> section of the
                                    <uicontrol>Admin</uicontrol> menu. </p>
                        </info>
                    </substep>
                    <substep>
                        <cmd>Select the <wintitle>Controller Filesystem</wintitle>
                            tab.</cmd>
                        <stepresult>
                            <p>The <wintitle>Controller
                                    Filesystem</wintitle> page appears, showing the currently
                                defined storage allotments.</p>
                            <fig id="fig_t3s_4mz_5p">
                                <image href="jow1413850529975.image" id="image_gtf_dwc_vp" width="6in">
                                    <alt>Controller filesystem page</alt>
                                </image>
                            </fig>
                        </stepresult>
                    </substep>
                    <substep>
                        <cmd>Click <uicontrol>Edit
                                Filesystem</uicontrol>.</cmd>
                        <stepresult>
                            <p>The <wintitle>Edit Controller
                                    Filesystem</wintitle> dialog box appears.</p>
                            <fig id="fig_tmw_qnz_5p">
                                <image href="jow1413850558829.image" id="image_khj_nwc_vp">
                                    <alt>Edit Controller Filesystem dialog</alt>
                                </image>
                            </fig>
                            <note id="note_N10146_N10124_N10115_N100B7_N1001F_N10001">
                                <p>The <uicontrol>Cinder storage
                                        (GiB)</uicontrol> field is present only for clusters using
                                    the LVM backend.</p>
                            </note>
                        </stepresult>
                    </substep>
                    <substep>
                        <cmd>Replace the storage allotments as required.</cmd>
                    </substep>
                    <substep>
                        <cmd>Click <uicontrol>Save</uicontrol>.</cmd>
                    </substep>
                </substeps>
                <info>
                    <p>This raises major alarms against the controllers
                            (<nameliteral>250.001 Configuration
                            out-of-date</nameliteral>). You can view the alarms on the Fault
                        Management page. In addition, the status <nameliteral>Config out-of-date</nameliteral> is shown for the controllers in the
                            <wintitle>Hosts</wintitle> list.</p>
                </info>
            </step>
            <step id="step_N100BF_N1002B_N1001D_N10001">
                <cmd>Lock the standby controller. </cmd>
            </step>
            <step id="step_N102CD_N100F1_N1001F_N10001">
                <cmd>Reinstall the HP Helion OpenStack Carrier Grade software on the standby
                    controller.</cmd>
                <info>
                    <p>This step is required to update the system configuration, even if you have
                        already reinstalled the HP Helion OpenStack Carrier Grade software as part of the disk
                        replacement procedure.</p>
                </info>
            </step>
            <step id="step_N102D6_N100F1_N1001F_N10001">
                <cmd>Unlock the standby controller.</cmd>
                <info>
                    <p>When the controller is unlocked, the <nameliteral>250.001 Configuration out-of-date</nameliteral> alarms
                        against the controller are cleared.</p>
                </info>
            </step>
            <step id="step_N102DF_N100F1_N1001F_N10001">
                <cmd>Swact the controllers.</cmd>
            </step>
            <step id="step_N10284_N100F2_N1001F_N10001">
                <cmd>Lock the new standby controller.</cmd>
            </step>
            <step id="step_N102E8_N100F1_N1001F_N10001">
                <cmd>Reinstall the HP Helion OpenStack Carrier Grade software on the
                    controller.</cmd>
            </step>
            <step id="step_N102F1_N100F1_N1001F_N10001">
                <cmd>Unlock the controller.</cmd>
            </step>
            <step id="step_N1025E_N100B7_N1001F_N10001">
                <cmd>Confirm that the <nameliteral>250.001
                        Configuration out-of-date</nameliteral> alarms are cleared for both
                    controllers.</cmd>
            </step>
        </steps>
        <postreq id="postreq_N10323_N1001F_N10001">
            <p>After making these changes, ensure that the configuration plan for
                your system is updated with the new storage allotments and disk sizes.</p>
        </postreq>
    </taskbody>
</task-wr>