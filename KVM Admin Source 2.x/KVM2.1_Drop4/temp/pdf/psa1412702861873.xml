<?xml version="1.0" encoding="UTF-8"?><?workdir /C:\Drop3and4\Drop4\temp\pdf?><?workdir-uri file:/C:/Drop3and4/Drop4/temp/pdf/?><?path2project?><?path2project-uri ./?><concept-wr xmlns:ditaarch="http://dita.oasis-open.org/architecture/2005/" id="psa1412702861873" xml:lang="en-us" ditaarch:DITAArchVersion="1.2" domains="(topic concept concept-wr)                            (topic hi-d)                             (topic indexing-d)                            (topic pr-d)                             (topic sw-d)                            (topic ui-d)                            (topic wr-sw-d)                            (topic xml-d)   " class="- topic/topic concept/concept concept-wr/concept-wr ">
<!-- Modification History

 -->
 <title ixia_locid="1" class="- topic/title ">Managed and Unmanaged Subnets</title>
 <shortdesc ixia_locid="2" class="- topic/shortdesc ">Use the <term ixia_locid="3" class="- topic/term ">System Managed Subnet</term> and <term ixia_locid="58" class="- topic/term ">Enable DHCP</term> subnet attributes to determine how IP addresses are allocated
  and offered on an IP subnet.</shortdesc>
 <prolog class="- topic/prolog ">
  <author ixia_locid="4" class="- topic/author ">Pedro Sanchez</author>
 </prolog>
 <conbody class="- topic/body  concept/conbody ">
  <p ixia_locid="60" class="- topic/p ">With the proper configuration in place, DHCP services can be provided by the built-in Neutron
   DHCP server, by a standalone server available from an external network infrastructure, or by
   both.</p>
  <p ixia_locid="5" class="- topic/p ">When creating a new IP subnet for a tenant network you can specify the following
   attributes:</p>
  <dl class="- topic/dl ">
   <dlentry ixia_locid="6" class="- topic/dlentry ">
    <dt ixia_locid="7" class="- topic/dt ">System Managed Subnet</dt>
    <dd ixia_locid="8" class="- topic/dd ">
     <p ixia_locid="9" class="- topic/p ">When this attribute is enabled, the subnet is <term ixia_locid="61" class="- topic/term ">system managed</term>.
      the Neutron service automatically allocates an IP address from the address allocation pools
      defined for the subnet to any new virtual machine instance with a virtual Ethernet interface
      attached to the tenant network. Once allocated, the pair (MAC address, IP address) is
      registered in the Neutron database as part of the overall registration process for the new
      virtual machine.</p>
     <p ixia_locid="11" class="- topic/p ">When the system managed subnet attribute is disabled, the subnet is <term ixia_locid="12" class="- topic/term ">unmanaged</term>. No automatic allocation of IP addresses takes place, and
      the Neutron DHCP service for the subnet is disabled. Allocation of IP addresses for new
      virtual machines must be done at boot time using the CLI or the API interfaces.</p>
    </dd>
   </dlentry>
   <dlentry ixia_locid="13" class="- topic/dlentry ">
    <dt ixia_locid="14" class="- topic/dt ">Enable DHCP</dt>
    <dd ixia_locid="15" class="- topic/dd ">
     <p ixia_locid="16" class="- topic/p ">When this attribute is enabled, a virtual DHCP server becomes available when
      the subnet is created. It uses the (MAC address, IP address) pairs registered in the Neutron
      database to offer IP addresses in response to DHCP discovery requests broadcast on the subnet.
      DHCP discovery requests from unknown MAC addresses are ignored.</p>
     <p ixia_locid="17" class="- topic/p ">The Neutron DHCP server can only be enabled on system managed subnets.  DHCP services for
      unmanaged subnets, if required, must be provisioned by external, non-Neutron, DHCP
      servers.</p>
     <p ixia_locid="18" class="- topic/p ">When the DHCP attribute is disabled, all DHCP and DNS services, and all
      static routes, if any, must be provisioned externally.</p>
    </dd>
   </dlentry>
   <dlentry ixia_locid="19" class="- topic/dlentry ">
    <dt ixia_locid="20" class="- topic/dt ">Allocation Pools</dt>
    <dd ixia_locid="21" class="- topic/dd ">
     <p ixia_locid="22" class="- topic/p ">This a list attribute where each element in the list specifies an IP address
      range, or address pool, in the subnet address space that can be used for dynamic offering of
      IP addresses. By default there is a single allocation pool comprised of the entire subnet's IP
      address space, with the exception of the default gateway's IP address.</p>
     <p ixia_locid="59" class="- topic/p ">An external, non-Neutron, DHCP server can be attached to a system managed subnet to support
      specific deployment needs as required. For example, it can be configured to offer IP addresses
      on ranges outside the Neutron allocation pools to service physical devices attached to the
      tenant network, such as testing equipment and servers.</p>
     <p ixia_locid="23" class="- topic/p ">Allocation pools can only be specified on system managed subnets.</p>
    </dd>
   </dlentry>
  </dl>
  <p ixia_locid="24" class="- topic/p ">On the web administration interface you set these attributes in the <uicontrol ixia_locid="25" class="+ topic/ph ui-d/uicontrol ">Subnet
    Detail</uicontrol> tab of the <wintitle ixia_locid="26" class="+ topic/keyword ui-d/wintitle ">Create Subnet</wintitle> window. On the CLI you set
   these attributes as illustrated in the following examples.</p>
  <p ixia_locid="27" class="- topic/p ">Create a new system managed subnet, DHCP-enabled, and a custom allocation pool:</p>
  <codeblock ixia_locid="28" class="+ topic/pre pr-d/codeblock "><systemoutput ixia_locid="29" class="+ topic/ph sw-d/systemoutput ">$ </systemoutput><userinput ixia_locid="30" class="+ topic/ph sw-d/userinput ">neutron subnet-create --name my-subnet ﻿\
--allocation-pool start=172.18.0.100,end=172.18.0.150 \
my-tenant-net 172.18.0.0/24</userinput></codeblock>
  <p ixia_locid="31" class="- topic/p ">Create a new system managed subnet with DHCP service disabled:</p>
  <codeblock ixia_locid="32" class="+ topic/pre pr-d/codeblock "><systemoutput ixia_locid="33" class="+ topic/ph sw-d/systemoutput ">$ </systemoutput><userinput ixia_locid="34" class="+ topic/ph sw-d/userinput ">neutron subnet-create --name my-subnet \
--disable-dhcp \
my-tenant-net 172.18.0.0/24</userinput></codeblock>
  <p ixia_locid="35" class="- topic/p ">Create a new unmanaged subnet:</p>
  <codeblock ixia_locid="36" class="+ topic/pre pr-d/codeblock "><systemoutput ixia_locid="37" class="+ topic/ph sw-d/systemoutput ">$ </systemoutput><userinput ixia_locid="38" class="+ topic/ph sw-d/userinput ">neutron subnet-create --name my-subnet \
--unmanaged --disable-dhcp \
my-tenant-net 172.18.0.0/24</userinput></codeblock>
  <section id="section_N100A6_N10020_N10001" ixia_locid="39" class="- topic/section ">
   <title ixia_locid="40" class="- topic/title ">Accessing the Metadata Server</title>
   <p ixia_locid="41" class="- topic/p ">Access to the system's metadata server is available using the well known URL
    ﻿http://169.254.169.254. In the HP Helion OpenStack Carrier Grade implementation, access to this address is
    provided by a virtual router attached to the tenant on which the access request is made. Virtual
    routers are automatically configured as proxies to the metadata service. </p>
   <p ixia_locid="42" class="- topic/p ">The following requirements must be satisfied in order for a guest application to access the
    metadata service:</p>
   <ol id="ol_dyn_vbd_sp" class="- topic/ol ">
    <li ixia_locid="45" class="- topic/li ">
     <p ixia_locid="47" class="- topic/p ">There is a route table entry to route traffic destined to the
      169.254.169.254 address via a Neutron router, or via a suitable static route to the
      169.254.169.254 address.</p>
    </li>
    <li ixia_locid="48" class="- topic/li ">
     <p ixia_locid="49" class="- topic/p ">The metadata server knows about the virtual machine instance associated with
      the MAC and IP addresses of the virtual Ethernet interface issuing the metadata service
      request. This is necessary for the metadata server to be able to validate the request, and to
      identify the virtual machine's specific data to be returned.</p>
     <p ixia_locid="50" class="- topic/p ">On system managed subnets, the Neutron service has all address information associated with
      the virtual machines in its database.</p>
     <p ixia_locid="51" class="- topic/p ">On unmanaged subnets, you must tell the Neutron service the IP address of
      the network interface issuing the metadata service requests. This can only be done using the
      command line or API interfaces when instantiating the virtual machine, as illustrated
      below:</p>
     <codeblock ixia_locid="52" class="+ topic/pre pr-d/codeblock "><systemoutput ixia_locid="53" class="+ topic/ph sw-d/systemoutput ">$ </systemoutput><userinput ixia_locid="54" class="+ topic/ph sw-d/userinput ">nova boot \
--nic net-id=<varname ixia_locid="55" class="+ topic/keyword sw-d/varname ">net-uuid</varname>,vif-model=avp,v4-fixed-ip=172.18.0.1 \
my-new-vm</userinput></codeblock>
     <p ixia_locid="56" class="- topic/p ">In this simplified example, the option <option ixia_locid="57" class="+ topic/keyword pr-d/option ">v4-fixed-ip</option> tells Neutron what the
      IP address for this interface should be. The interface's MAC address is automatically
      generated by Nova.</p>
    </li>
   </ol>
  </section>
 </conbody>
</concept-wr>