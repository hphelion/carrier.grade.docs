<?xml version="1.0" encoding="UTF-8"?><?workdir /C:\Drop3and4\Drop4\temp\pdf?><?workdir-uri file:/C:/Drop3and4/Drop4/temp/pdf/?><?path2project?><?path2project-uri ./?><task-wr xmlns:ditaarch="http://dita.oasis-open.org/architecture/2005/" id="jow1424723681500" xml:lang="en-us" ditaarch:DITAArchVersion="1.2" domains="(topic task task-wr)                            (topic hi-d)                             (topic pr-d)                             (topic sw-d)                            (topic ui-d)                            (topic wr-sw-d)                            (topic xml-d)   " class="- topic/topic task/task task-wr/task-wr ">
<!-- Modification History
        
-->
    <title ixia_locid="51" class="- topic/title ">Specifying a Page Size for a VM </title>
    <shortdesc ixia_locid="52" class="- topic/shortdesc ">You can request a specific memory page size for a VM by using a
        flavor with the required extra spec, or by defining an image with the required metadata
        property.</shortdesc>
    <prolog class="- topic/prolog ">
        <author ixia_locid="53" class="- topic/author ">Jim Owens</author>
        <author ixia_locid="87" class="- topic/author ">Pedro Sanchez</author>
    </prolog>
    <taskbody class="- topic/body task/taskbody ">
        <context id="context_N1001F_N1001C_N10001" ixia_locid="54" class="- topic/section task/context ">
            <p ixia_locid="14" class="- topic/p ">Memory requested by a guest is allocated as one or more pages of a
                specified size. Once allocated, the memory is unavailable for use by other guests
                until the instance is terminated. </p>
            <p ixia_locid="17" class="- topic/p ">To add this extra spec to a flavor using the web administration
                interface, use the <uicontrol ixia_locid="78" class="+ topic/ph ui-d/uicontrol ">Memory Page Size</uicontrol> selection
                in the <uicontrol ixia_locid="79" class="+ topic/ph ui-d/uicontrol ">Create Flavor Extra Spec</uicontrol> drop-down
                menu. To access this menu, see <xref href="jow1429538642910.xml" ixia_locid="80" class="- topic/xref "/>.</p>
            <p ixia_locid="18" class="- topic/p ">You can also specify the extra spec from the CLI by setting the
                following parameter for a flavor:</p>
            <codeblock ixia_locid="20" class="+ topic/pre pr-d/codeblock "><userinput ixia_locid="22" class="+ topic/ph sw-d/userinput ">hw:mem_page_size=<varname ixia_locid="23" class="+ topic/keyword sw-d/varname ">pagesize</varname></userinput></codeblock>
            <p ixia_locid="24" class="- topic/p ">where <varname ixia_locid="25" class="+ topic/keyword sw-d/varname ">pagesize</varname> is one of the
                following:</p>
            <dl class="- topic/dl ">
                <dlentry ixia_locid="26" class="- topic/dlentry ">
                    <dt ixia_locid="27" class="- topic/dt ">small</dt>
                    <dd ixia_locid="28" class="- topic/dd ">
                        <p ixia_locid="29" class="- topic/p ">Requests the smallest available size on the compute node,
                            which is always 4KiB of regular memory. </p>
                    </dd>
                </dlentry>
                <dlentry ixia_locid="30" class="- topic/dlentry ">
                    <dt ixia_locid="31" class="- topic/dt ">large</dt>
                    <dd ixia_locid="32" class="- topic/dd ">
                        <p ixia_locid="33" class="- topic/p ">Requests the largest available huge page size, 1GiB or
                            2MiB.</p>
                    </dd>
                </dlentry>
                <dlentry ixia_locid="34" class="- topic/dlentry ">
                    <dt ixia_locid="35" class="- topic/dt ">any</dt>
                    <dd ixia_locid="36" class="- topic/dd ">
                        <p ixia_locid="37" class="- topic/p ">Requests any available size, including small pages.
                            HP Helion OpenStack Carrier Grade uses the largest available size, 1GiB, then 2MiB, and
                            then 4KiB.</p>
                    </dd>
                </dlentry>
                <dlentry ixia_locid="38" class="- topic/dlentry ">
                    <dt ixia_locid="39" class="- topic/dt ">2048</dt>
                    <dd ixia_locid="40" class="- topic/dd ">
                        <p ixia_locid="41" class="- topic/p ">Requests a huge page of size 2 MiB. This is the default
                            value when the extra spec is not used.</p>
                    </dd>
                </dlentry>
                 <dlentry ixia_locid="42" class="- topic/dlentry ">
                    <dt ixia_locid="43" class="- topic/dt ">1048576</dt>
                    <dd ixia_locid="44" class="- topic/dd ">
                        <p ixia_locid="45" class="- topic/p ">requests a huge page of size 1GiB.</p>
                    </dd>
                </dlentry> 
            </dl>
            <p ixia_locid="84" class="- topic/p ">If any other value is supplied, it is ignored and the default value
                of <nameliteral ixia_locid="85" class="+ topic/ph hi-d/b wr-sw-d/nameliteral ">2048</nameliteral> is used.</p>
            <p ixia_locid="69" class="- topic/p ">It is suggested that NFV applications use explicit huge page sizes to
                ensure predictable memory access at run time. Use of <nameliteral ixia_locid="88" class="+ topic/ph hi-d/b wr-sw-d/nameliteral ">large</nameliteral> and <nameliteral ixia_locid="89" class="+ topic/ph hi-d/b wr-sw-d/nameliteral ">any</nameliteral> sizes
                may cause VM migration issues when the available page size on the destination node
                is different. </p>
            <p ixia_locid="56" class="- topic/p ">For example, to set a 1 GiB huge page size on a flavor that has
                already been created, use the following command:</p>
            <codeblock ixia_locid="57" class="+ topic/pre pr-d/codeblock "><systemoutput ixia_locid="58" class="+ topic/ph sw-d/systemoutput ">~(keystone)admin)$ </systemoutput><userinput ixia_locid="60" class="+ topic/ph sw-d/userinput ">nova flavor-key <varname ixia_locid="81" class="+ topic/keyword sw-d/varname ">flavor_name</varname> set hw:mem_page_size=1048576</userinput></codeblock>
            <p ixia_locid="15" class="- topic/p ">You can also define an image with the required property by including
                the <parmname ixia_locid="46" class="+ topic/keyword pr-d/parmname ">hw_mem_page_size</parmname> parameter, as in the
                following example:</p>
            <codeblock ixia_locid="21" class="+ topic/pre pr-d/codeblock "><systemoutput ixia_locid="59" class="+ topic/ph sw-d/systemoutput ">~(keystone)admin)$ </systemoutput><userinput ixia_locid="48" class="+ topic/ph sw-d/userinput ">nova image-meta <varname ixia_locid="49" class="+ topic/keyword sw-d/varname ">image</varname> set hw_mem_page_size=<varname ixia_locid="50" class="+ topic/keyword sw-d/varname ">pagesize</varname></userinput></codeblock>
            <p ixia_locid="55" class="- topic/p ">Note that if you use image metadata to request a page size, the image
                is unable to access a <nameliteral ixia_locid="75" class="+ topic/ph hi-d/b wr-sw-d/nameliteral ">large</nameliteral> page unless
                the setting for the flavor is <nameliteral ixia_locid="76" class="+ topic/ph hi-d/b wr-sw-d/nameliteral ">large</nameliteral> or
                    <nameliteral ixia_locid="77" class="+ topic/ph hi-d/b wr-sw-d/nameliteral ">any</nameliteral>.</p>
        </context>
        <prereq id="prereq_N10022_N1001F_N10001" ixia_locid="61" class="- topic/section task/prereq ">
            <p ixia_locid="62" class="- topic/p ">Host memory on compute nodes reserved for use by VMs is partitioned
                by default using only 2 MiB huge page blocks. These blocks are used by default as
                the backing mechanism for VM virtual memory allocation requests. See <xref href="jow1423087781001.xml" ixia_locid="63" class="- topic/xref "/> for details on how to modify the
                memory partitioning scheme for a host.</p>
        </prereq>
    </taskbody>
</task-wr>