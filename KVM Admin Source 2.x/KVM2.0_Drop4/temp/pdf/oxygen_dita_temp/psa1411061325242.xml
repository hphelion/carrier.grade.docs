<?xml version="1.0" encoding="UTF-8"?><?workdir /C:\Drop3and4\Drop4\temp\pdf\oxygen_dita_temp?><?workdir-uri file:/C:/Drop3and4/Drop4/temp/pdf/oxygen_dita_temp/?><?path2project?><?path2project-uri ./?><task-wr xmlns:ditaarch="http://dita.oasis-open.org/architecture/2005/" ditaarch:DITAArchVersion="1.2" domains="(topic task task-wr)                            (topic hi-d)                            (topic pr-d)                            (topic sw-d)                            (topic ui-d)                            (topic wr-sw-d)                            (topic xml-d)   " id="psa1411061325242" xml:lang="en-us" class="- topic/topic task/task task-wr/task-wr ">
<!-- Modification History
        
-->
    <title ixia_locid="1" class="- topic/title ">Backing Up Available Cinder Volumes</title>
    <shortdesc ixia_locid="2" class="- topic/shortdesc ">You can back up Cinder volumes in the <i ixia_locid="3" class="+ topic/ph hi-d/i ">available</i>
        state.</shortdesc>
    <prolog class="- topic/prolog ">
        <author ixia_locid="4" class="- topic/author ">Pedro Sanchez</author>
    </prolog>
    <taskbody class="- topic/body task/taskbody ">
        <context id="context_N10023_N10020_N10001" ixia_locid="5" class="- topic/section task/context ">
            <p ixia_locid="6" class="- topic/p ">A Cinder volume in the <i ixia_locid="9" class="+ topic/ph hi-d/i ">available</i> state is the ideal
                candidate for a backup operation in that there are no running instances using it. </p>
        </context>
        <steps class="- topic/ol task/steps ">
            <step id="step_N1003A_N10037_N10024_N10001" ixia_locid="70" class="- topic/li task/step " conref="psa1410446807133.xml#psa1410446807133/cli-admin-login">
                <cmd ixia_locid="71" class="- topic/ph task/cmd "/>
            </step>
            <step id="step_N1002E_N1002B_N10020_N10001" ixia_locid="7" class="- topic/li task/step ">
                <cmd ixia_locid="8" class="- topic/ph task/cmd ">Identify the volume you want to back up.</cmd>
                <substeps id="substeps_aqf_dsz_lp" class="- topic/ol task/substeps ">
                    <substep ixia_locid="13" class="- topic/li task/substep ">
                        <cmd ixia_locid="14" class="- topic/ph task/cmd ">List Cinder volumes from all tenants.</cmd>
                        <stepxmp ixia_locid="15" class="- topic/itemgroup task/stepxmp ">
                            <codeblock ixia_locid="16" class="+ topic/pre pr-d/codeblock "><systemoutput ixia_locid="72" class="+ topic/ph sw-d/systemoutput ">~(keystone_admin)$ </systemoutput><userinput ixia_locid="18" class="+ topic/ph sw-d/userinput ">cinder list --all-tenants</userinput>
<systemoutput ixia_locid="73" class="+ topic/ph sw-d/systemoutput ">﻿+--------------+-----------+-----------------+------+-------------+----------
|   ID         |   Status  |   Display Name  | Size | Volume Type | Bootable 
+--------------+-----------+-----------------+------+-------------+----------
| 593111d8-... | in-use    | volume-1        |  1   |     None    |   true   
| 53ad007a-... | available | volume-2        |  10  |     None    |   false  
+--------------+-----------+-----------------+------+-------------+----------
+---------------+
| Attached to   |
+---------------+
|  ﻿b998107b-... |
|               |
+---------------+﻿</systemoutput></codeblock>
                        </stepxmp>
                        <info ixia_locid="20" class="- topic/itemgroup task/info ">
                            <p ixia_locid="21" class="- topic/p ">Cinder volumes are listed also on the <wintitle ixia_locid="22" class="+ topic/keyword ui-d/wintitle ">Volumes</wintitle> page of the web
                                administration interface.</p>
                        </info>
                    </substep>
                    <substep ixia_locid="23" class="- topic/li task/substep ">
                        <cmd ixia_locid="24" class="- topic/ph task/cmd ">Identify the volume to back up.</cmd>
                        <info ixia_locid="25" class="- topic/itemgroup task/info ">
                            <p ixia_locid="26" class="- topic/p ">In the list above, <nameliteral ixia_locid="27" class="+ topic/ph hi-d/b wr-sw-d/nameliteral ">volume-1</nameliteral> is a disk image associated with a
                                running instance. The volume <nameliteral ixia_locid="28" class="+ topic/ph hi-d/b wr-sw-d/nameliteral ">volume-2</nameliteral>, with UUID <nameliteral ixia_locid="29" class="+ topic/ph hi-d/b wr-sw-d/nameliteral ">53ad007a-...</nameliteral>, is available and can be safely
                                backed up. </p>
                        </info>
                    </substep>
                </substeps>
            </step>
            <step id="step_N10097_N10036_N10024_N10001" ixia_locid="30" class="- topic/li task/step ">
                <cmd ixia_locid="31" class="- topic/ph task/cmd ">Export the target volume to the controller's file system.</cmd>
                <stepxmp ixia_locid="32" class="- topic/itemgroup task/stepxmp ">
                    <codeblock ixia_locid="33" class="+ topic/pre pr-d/codeblock "><systemoutput ixia_locid="74" class="+ topic/ph sw-d/systemoutput ">~(keystone_admin)$ </systemoutput><userinput ixia_locid="35" class="+ topic/ph sw-d/userinput ">cinder export 53ad007a-841a-4fd3-a22b-813d4a6a8a85</userinput>
<systemoutput ixia_locid="75" class="+ topic/ph sw-d/systemoutput ">+---------------------+--------------------------------------+
|       Property      |                Value                 |
+---------------------+--------------------------------------+
| display_description |                                      |
|          id         | 53ad007a-841a-4fd3-a22b-813d4a6a8a85 |
|         size        |                  1                   |
|        status       |              exporting               |
|      updated_at     |      2014-09-18T21:36:15.247881      |
|     volume_type     |                 None                 |
+---------------------+--------------------------------------+</systemoutput></codeblock>
                </stepxmp>
                <info ixia_locid="37" class="- topic/itemgroup task/info ">
                    <p ixia_locid="38" class="- topic/p ">Exporting the volume takes some time, longer times for larger
                        volumes. While it is taking place, the status of the volume is set to <i ixia_locid="39" class="+ topic/ph hi-d/i ">exporting</i>, which you can verify by issuing the
                        command <cmdname ixia_locid="40" class="+ topic/keyword sw-d/cmdname ">cinder show </cmdname>
                        <varname ixia_locid="79" class="+ topic/keyword sw-d/varname ">UUID</varname>, or <cmdname ixia_locid="41" class="+ topic/keyword sw-d/cmdname ">cinder list
                            --all-tenants</cmdname> again. This new state is automatically reported
                        on the Web administration interface.</p>
                    <p ixia_locid="42" class="- topic/p ">You must wait for the export operation to complete. Use the
                        command <cmdname ixia_locid="68" class="+ topic/keyword sw-d/cmdname ">cinder show 53ad007a-...</cmdname> and look for the
                            <nameliteral ixia_locid="69" class="+ topic/ph hi-d/b wr-sw-d/nameliteral ">backup_status</nameliteral> field to determine whether the
                        export operation was successful. The state of the volume should be set to
                            <i ixia_locid="43" class="+ topic/ph hi-d/i ">available</i> again.</p>
                </info>
                <stepresult ixia_locid="44" class="- topic/itemgroup task/stepresult ">
                    <p ixia_locid="45" class="- topic/p ">When the export operation completes, the backup file is ready, as illustrated
                        in the following example:</p>
                    <codeblock ixia_locid="46" class="+ topic/pre pr-d/codeblock "><systemoutput ixia_locid="76" class="+ topic/ph sw-d/systemoutput ">~(keystone_admin)$ </systemoutput><userinput ixia_locid="48" class="+ topic/ph sw-d/userinput ">ls -lh /opt/backups</userinput>
<systemoutput ixia_locid="77" class="+ topic/ph sw-d/systemoutput ">total 306M
drwx------ 2 root root  16K Sep 10 17:42 lost+found
drwxr-xr-x 2 root root 4.0K Sep 18 21:42 temp
-rw-r--r-- 1 root root 305M Sep 18 21:42 volume-53ad007a-841a-4fd3-a22b-813d4a6a8a85-20140918-213918.tgz</systemoutput></codeblock>
                </stepresult>
            </step>
            <step id="step_N100E2_N10036_N10024_N10001" ixia_locid="50" class="- topic/li task/step ">
                <cmd ixia_locid="51" class="- topic/ph task/cmd ">Transfer the backup file to an external storage resource.</cmd>
                <info ixia_locid="52" class="- topic/itemgroup task/info ">
                    <p ixia_locid="53" class="- topic/p ">The following example uses the <cmdname ixia_locid="54" class="+ topic/keyword sw-d/cmdname ">scp</cmdname> command to transfer the
                        backup file to the directory <filepath ixia_locid="55" class="+ topic/ph sw-d/filepath ">/backups/titanium</filepath> on a
                        server named <nameliteral ixia_locid="56" class="+ topic/ph hi-d/b wr-sw-d/nameliteral ">backups-server.wrs.com</nameliteral>:</p>
                </info>
                <stepxmp ixia_locid="57" class="- topic/itemgroup task/stepxmp ">
                    <codeblock ixia_locid="58" class="+ topic/pre pr-d/codeblock "><systemoutput ixia_locid="78" class="+ topic/ph sw-d/systemoutput ">~(keystone_admin)$ </systemoutput><userinput ixia_locid="60" class="+ topic/ph sw-d/userinput ">scp /opt/backups/volume-53ad007a-841a-4fd3-a22b-813d4a6a8a85-20140918-213918.tgz admin@backups-server.wrs.com:/backups/titanium</userinput></codeblock>
                </stepxmp>
            </step>
            <step id="step_N1010C_N10036_N10024_N10001" ixia_locid="61" class="- topic/li task/step ">
                <cmd importance="optional" ixia_locid="62" class="- topic/ph task/cmd ">Delete the backup file.</cmd>
                <info ixia_locid="63" class="- topic/itemgroup task/info ">
                    <p ixia_locid="64" class="- topic/p ">You may want to free up disk space on the controller to
                        accommodate additional Cinder volume backups.</p>
                </info>
            </step>
        </steps>
        <result id="result_N1011B_N10024_N10001" ixia_locid="65" class="- topic/section task/result ">
            <p ixia_locid="66" class="- topic/p ">The volume backup is complete. Repeat this procedure with all other Cinder volumes in
                the <i ixia_locid="67" class="+ topic/ph hi-d/i ">available</i> state in the system.</p>
        </result>
    </taskbody>
</task-wr>