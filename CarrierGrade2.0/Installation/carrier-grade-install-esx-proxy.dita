<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic
  PUBLIC "-//OASIS//DTD DITA Topic//EN" "http://docs.oasis-open.org/dita/v1.1/OS/dtd/topic.dtd"><topic xml:lang="en-us" id="topic10581cgiep">
<title>HP Helion <tm tmtype="reg">OpenStack</tm> Carrier Grade 2.0: Deploying the ESX<tm
      tmtype="reg"/> Compute Proxy</title>
<prolog>
  <metadata>
    <othermeta name="layout" content="default"/>
    <othermeta name="product-version" content="HP Helion OpenStack Carrier Grade 2.0"/>
    <othermeta name="role" content="Storage Administrator"/>
    <othermeta name="role" content="Storage Architect"/>
    <othermeta name="role" content="Michael B"/>
    <othermeta name="product-version1" content="HP Helion OpenStack Carrier Grade 2.0"/>
  </metadata>
</prolog>
<body>
  <p><i>Return to installing the non-KVM region for the <xref
    href="../Installation/memphis/CGH-2-install-memphis.dita#topic10581c2im/conref-esx-proxy">memphis</xref> or <xref
      href="../Installation/sacramento/CGH-2-install-sacramento.dita#topic10581c2is/conref-esx-proxy">sacramento</xref>
      template.</i></p>
  
    <p>The HP Helion OpenStack Carrier Grade vCenter ESX compute proxy (compute proxy) is a driver
      that enables the Compute service to communicate with a VMware vCenter server managing one or
      more ESX hosts. The HP Helion OpenStack Compute Service (Nova) requires this driver to
      interface with VMware ESX hypervisor APIs.</p>
    <p>After installing and configuring the VMware ESX and vCenter Server, use the following
      instructions to install the compute proxy. The compute proxy is distributed as open virtual
      appliance (OVA) template file. The compute proxy template needs to be available in the vCenter
      before the deploying the HP Helion OpenStack cloud (before you run <codeph>hprovision</codeph>
      script).</p>
    <p>The ESX and vCenter server should be installed within the non-KVM region and attached to the
      CLM network, as shown in the <xref href="carrier-grade-technical-overview.dita#topic3485cgto"
        >Technical Overview</xref></p>
    <p>The process for installing the compute proxy includes the following:</p>
    <section id="download"
      ><!--<title>Dowloading the compute proxy</title><p>The required ESX Compute Center Proxy template is included in the <codeph>hcg_1.1.0.tar</codeph> you downloaded in the <xref href="carrier-grade-install-pb-prereqs-GA.dita#topic7148cgippg">Prerequisites</xref>. Move the template file, named <codeph>TEMPL-CPV9.ova</codeph> to the server where vCenter is installed, or a system you can access from the vCenter server. If you need to download the template again:</p><ol id="ol_alh_vgq_nt"><li>In a browser, navigate to <xref href="https://helion.hpwsportal.com/catalog.html#/Home/Show" format="html" scope="external">Helion Download Network(HDN)</xref>. <ul id="ul_lvg_jb2_xs"><li>Click <b>Sign In</b> to log in using your account. </li><li>After signing in, click the <b>Downloads</b> link in the menu on the left side of the page.</li><li>On the <b>Downloads</b> page, locate <b>Helion Carrier Grade 2.0.0</b> and click <b>Download</b>.</li></ul></li></ol>--></section>
    <section id="deploy">
      <title>Deploy the compute proxy on the ESX Host</title>
      <p>You should have downloaded and extract the <codeph>TEMPL-CPV9.ova</codeph> to any local
        directory <xref href="../Installation/prereqs/carrier-grade-install-download.dita#topic7148cgid/extract">during the
          Prerequisites</xref>.</p>
      <p>To deploy the compute proxy:<ol id="ol_ezn_ybt_xs">
          <li>Launch the VMware vCenter client.</li>
          <li>Click <b>File</b>, then <b>Deploy OVF Template</b>.</li>
          <li>In the <b>Deploy OVF Template</b> wizard, browse to the location of the
              <codeph>TEMPL-CPV9.ova</codeph> file.</li>
          <li>Click <b>Next</b> and complete the wizard:<ol id="ol_dsf_tnm_2t">
              <li>Verify the details of the template.</li>
              <li>Select the datacenter where the template will be deployed.</li>
              <li>Select the host IP address for the cluster.</li>
              <li>Select <codeph>Thin Provision</codeph> for storage format.</li>
              <li>Review the details for the installation and click <b>Finish</b>.</li>
            </ol></li>
        </ol></p>
      <p>The template appears in the cluster list when the installation is complete.</p>
      <p><image href="../../media/CGH-2-compute-proxy-list.png" id="image_ygs_n4m_2t"/></p>
    </section>
    
    <section id="json">
      <title>Modify esx.json</title>
      <p>When you provision HP Helion OpenStack during the installation, the
          <codeph>hprovision</codeph> script provisions the compute proxy based on the details
        specified in the <codeph>esx.json</codeph> file.</p>
      <p>You need to modify the <codeph>esx.json</codeph> file with values appropriate for your
        environment. You can use the CLM network details  from the <codeph>environment.json</codeph>
        file. The compute proxy nodes will be assigned a static IP address based on the cidr
        calculation.</p>
      <p>See  a <xref href="../Installation/json/carrier-grade-install-kvm-esx-json-sac.dita">sample esx.json file</xref>
        for details on modifying the esx.json file.</p>
    </section>
      <section id="integrate"><title>Integration into the cloud framework</title>
      <p>The HP Helion OpenStack Carrier Grade installation scripts will perform the tasks required
        to integrate the compute proxy into the HP Helion OpenStack Carrier Grade cloud.</p>
      <p>For example, the <codeph>hprovision</codeph> script provisions the compute proxy node(s)
        and appends the provisioned proxy nodes to the <codeph>nodes.json</codeph> file.</p>
      <p>Since the compute proxy nodes are listed in the <codeph>nodes.json</codeph> file, they are
        recognized by the <codeph>hcfgproc</codeph> script and required metadata is generated for
        these nodes. Further the <codeph>hnetinit</codeph> script sets the appropriate networking
        and updates hosts file on these nodes to be configured by the <codeph>hdeploy</codeph>
        process.</p>
    </section>
  <p><i>Return to installing the non-KVM region for the <xref
    href="../Installation/memphis/CGH-2-install-memphis.dita#topic10581c2im/conref-esx-proxy">memphis</xref> or <xref
      href="../Installation/sacramento/CGH-2-install-sacramento.dita#topic10581c2is/conref-esx-proxy">sacramento</xref>
      template.</i></p>
  </body>
</topic>
