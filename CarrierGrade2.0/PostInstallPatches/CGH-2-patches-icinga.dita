<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic
  PUBLIC "-//OASIS//DTD DITA Topic//EN" "http://docs.oasis-open.org/dita/v1.1/OS/dtd/topic.dtd" >
<topic xml:lang="en-us" id="topic10581pdpi">
  <title>HP Helion <tm tmtype="reg">OpenStack</tm> Carrier Grade 2.0: Deploy the Icinga Random
    Password Patch</title>
  <prolog>
    <metadata>
      <othermeta name="layout" content="default"/>
      <othermeta name="product-version" content="HP Helion OpenStack Carreir Grade 1.1"/>
      <othermeta name="role" content="Storage Administrator"/>
      <othermeta name="role" content="Storage Architect"/>
      <othermeta name="role" content="Michael B"/>
      <othermeta name="product-version1" content="HP Helion OpenStack Carreir Grade 1.1"/>
    </metadata>
  </prolog>
  <body>
    <p>This patch must be applied only after the HP Helion OpenStack Carrier Grade is fully deployed
      for the all cloud topologies to create a random password for Icinga.</p>
    <section><title>Download the patch</title><p>If you have not downloaded the patch, launch the
          <xref href="https://helion.hpwsportal.com/catalog.html#/Home/Show" format="html"
          scope="external">Helion Distribution Network (HDN)</xref>. You must <xref
          href="https://idm.pod1.prod-core.hpwsportal.com/webid/" format="html" scope="external"
          >obtain a user account on HDN</xref> in order to download these files. </p>In a browser,
      navigate to <xref href="https://helion.hpwsportal.com/catalog.html#/Home/Show" format="html"
        scope="external">Helion Download Network(HDN)</xref>. <ol id="ul_lvg_jb2_xs">
        <li>Click <b>Sign In</b> to log in using your account. </li>
        <li>After signing in, click the <b>Downloads</b> link in the menu on the left side of the
          page.</li>
        <li>Download the <b
            conref="../Installation/prereqs/carrier-grade-install-download.dita#topic7148cgid/008"/>
          file and the associated checksum and signature files.</li>
        <li>Verify the <xref
            href="../Installation/prereqs/carrier-grade-install-download.dita#topic7148cgid/verify"
            >downloaded signature</xref> and the <xref
            href="../Installation/prereqs/carrier-grade-install-download.dita#topic7148cgid/checksum"
            >downloaded checksums</xref>.</li>
        <li>Extract the compressed files until the <codeph id="name">icinga-random-password.patch</codeph> and
            <codeph>Readme-post-deploy.txt</codeph> files are available.</li>
      </ol></section>
    <section>
      <title>Install the patch</title>
      <ol id="ol_qbh_tpm_s5">
        <li>Log onto the lifecycle manager VM. <codeblock>ssh &lt;HLM_VM_IP></codeblock><p>where:
            HLM_VM_IP is the CLM IP of the lifecycle manager. Locate the IP address for the
            lifecycle manager in the <codeph>/root/infra-ansible-playbooks/group_vars/all</codeph>
            file under <codeph>hlm_clmstaticip</codeph> field.</p></li>
        <li>Copy the <codeph>icinga-random-password.patch</codeph> to the <codeph>/root/</codeph>
          directory. </li>
        <li>Change to the <codeph>root/kenobi-node-configuration</codeph>
          directory:<codeblock>cd /root/kenobi-node-configuration</codeblock></li>
        <li> Execute the following command to deploy the patch:
          <codeblock>patch -p1 &lt; /root/icinga-random-password.patch</codeblock></li>
        <li>Execute the following command to integrate the changes into the
          environment:<codeblock>./hlm_prepare-env.sh</codeblock></li>
        <li>Execute the following
          command:<codeblock>hlm generate -c &lt;cloud name></codeblock></li>
        <li>Execute the following command to redeploy Icinga roles:
          <codeblock>hlm deploy -c &lt;cloud name> -t "IC2-SVC IC2-WEB" </codeblock></li>
      </ol>
    </section>
    <section>
      <title>Locate the random password</title>
      <p>The command creates a random password in the  following
        directory<codeblock>/var/hlm/clouds/&lt;cloudname>/desired_state/&lt;cloudname>/001/base/persistent_state/private_data.yml</codeblock>Open
        the <codeph>private_data.yml</codeph> file to locate the random password in the
          <codeph>icinga_root_pwd</codeph> variable</p>
      <p>You access the Icinga web portal using <codeph>http://&lt;CLM-IP>:82/icinga-web/</codeph>.
        Use <codeph>root</codeph> as a user name and the random password to log in. </p>
      <p>To change the password:</p>
      <p>
        <ol id="ol_et5_2rm_s5">
          <li>Click the <b>Root</b> menu in the top right. </li>
          <li>Select <b>Preferences</b>, then <b>Password</b>. </li>
          <li> Enter a new password and click Save </li>
          <li>Log out by clicking the <b>Root</b> menu, then <b>Logout</b>. </li>
        </ol>
      </p>
    </section>
  </body>
</topic>
