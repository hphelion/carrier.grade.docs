<?xml version="1.0" encoding="UTF-8"?><?workdir /C:\Drop3and4\Drop4\temp\pdf?><?workdir-uri file:/C:/Drop3and4/Drop4/temp/pdf/?><?path2project?><?path2project-uri ./?><concept-wr xmlns:ditaarch="http://dita.oasis-open.org/architecture/2005/" domains="(topic concept concept-wr)                            (topic hi-d)                            (topic indexing-d)                            (topic pr-d)                            (topic sw-d)                            (topic ui-d)                            (topic wr-sw-d)                            (topic xml-d)   " id="jow1409240700100" xml:lang="en-us" ditaarch:DITAArchVersion="1.2" class="- topic/topic concept/concept concept-wr/concept-wr ">
<!-- Modification History

 -->
 <title ixia_locid="1" class="- topic/title ">Customizing Guest Images with User Data</title>
 <shortdesc ixia_locid="2" class="- topic/shortdesc ">You can provide bootstrap configuration for an instance at launch by including user data
  in the template.</shortdesc>
 <prolog class="- topic/prolog ">
  <author ixia_locid="3" class="- topic/author ">Jim Owens</author>
 </prolog>
 <conbody class="- topic/body  concept/conbody ">
  <p ixia_locid="4" class="- topic/p ">You can include user data by defining a <nameliteral ixia_locid="5" class="+ topic/ph hi-d/b wr-sw-d/nameliteral ">UserData</nameliteral> property for an instance. This sends configuration instructions to
      the instance at launch. For an example of user data, see the <filepath ixia_locid="6" class="+ topic/ph sw-d/filepath ">CombinationAutoScaling.yaml</filepath> template included with HP Helion OpenStack Carrier Grade.</p>
  <p ixia_locid="7" class="- topic/p ">Normally, this requires <libraryname ixia_locid="8" class="+ topic/ph hi-d/b wr-sw-d/libraryname ">cloud-init</libraryname> to
      be installed in the guest, because the user data is converted to MIME format and then
      interpreted by <libraryname ixia_locid="9" class="+ topic/ph hi-d/b wr-sw-d/libraryname ">cloud-init</libraryname>. For instances that do not
      include <libraryname ixia_locid="10" class="+ topic/ph hi-d/b wr-sw-d/libraryname ">cloud-init</libraryname>, you can bypass the MIME
      conversion of user data by invoking a HP Helion OpenStack extension property and assigning the value
        <nameliteral ixia_locid="14" class="+ topic/ph hi-d/b wr-sw-d/nameliteral ">'RAW'</nameliteral>. This allows the VM to retrieve the
      specified user data in unaltered format through a simple REST API call to the metadata server.
      The name of the property follows the convention for the associated resource type. For an AWS
      resource (for example, <nameliteral ixia_locid="15" class="+ topic/ph hi-d/b wr-sw-d/nameliteral ">AWS::EC2::Instance</nameliteral>), use
        <parmname ixia_locid="11" class="+ topic/keyword pr-d/parmname ">UserDataType</parmname>. For an OpenStack resource (for example,
        <nameliteral ixia_locid="16" class="+ topic/ph hi-d/b wr-sw-d/nameliteral ">OS::Nova::Server</nameliteral>), use <parmname ixia_locid="17" class="+ topic/keyword pr-d/parmname ">user_data_type</parmname>. The following code fragment shows the property used with an AWS
      resource.</p>
  <codeblock ixia_locid="13" class="+ topic/pre pr-d/codeblock ">...
Srv:
   type: OS::Nova::Server
    properties:
      name: l3-forwarding
      â€¦
      user_data_format: 'RAW'
      user_data:
        Fn::Base64:
            Fn::Replace:
            - 'OS::stack_name': {Ref: 'OS::stack_name'}
            - |
              #cloud-config

              runcmd:
               - ifconfig eth1 1.1.1.1/24 up
               - ifconfig eth2 2.2.2.1/24 up
               - echo 1 &gt; /proc/sys/net/ipv4/ip_forward
               - sed -i -e 's#.*\(net.ipv4.ip_forward\).*#\1 = 1#g' /etc/sysctl.conf
               - ip route add 192.50.0.0/16 via 1.1.1.10
               - ip route add 192.51.0.0/16 via 2.2.2.10
...</codeblock>
    <note id="note_N10063_N1001F_N10001" ixia_locid="18" class="- topic/note ">
      <p ixia_locid="19" class="- topic/p ">For a VM to access user data, it must have a DHCP-enabled interface on a
        tenant network that has a Neutron router. Typically, this is the interface to the VM's OAM
        network or an internal network. The Neutron router provides a route to the metadata server,
        which provides instances with access to user data.</p>
    </note>
 </conbody>
</concept-wr>