<?xml version="1.0" encoding="UTF-8"?><?workdir /C:\Drop3and4\Drop4\temp\pdf\oxygen_dita_temp?><?workdir-uri file:/C:/Drop3and4/Drop4/temp/pdf/oxygen_dita_temp/?><?path2project?><?path2project-uri ./?><task-wr xmlns:ditaarch="http://dita.oasis-open.org/architecture/2005/" id="jow1429544935360" xml:lang="en-us" ditaarch:DITAArchVersion="1.2" domains="(topic task task-wr)                            (topic hi-d)                             (topic pr-d)                             (topic sw-d)                            (topic ui-d)                            (topic wr-sw-d)                            (topic xml-d)   " class="- topic/topic task/task task-wr/task-wr ">
<!-- Modification History
        
-->
    <title ixia_locid="356" class="- topic/title ">Specifying Dedicated CPUs for a VM</title>
    <shortdesc ixia_locid="357" class="- topic/shortdesc ">You can require the use of dedicated CPUs for a VM using an extra
        specification.</shortdesc>
    <prolog class="- topic/prolog ">
        <author ixia_locid="358" class="- topic/author ">Jim Owens</author>
    </prolog>
    <taskbody class="- topic/body task/taskbody ">
        <context id="context_N1001F_N1001C_N10001" ixia_locid="359" class="- topic/section task/context ">
            <p ixia_locid="363" class="- topic/p ">When a virtual machine is launched, its virtual CPUs use resources
                from a shared pool of cores<!-- (physical cores or logical processors)--> on the
                target compute node. Each virtual CPU is scheduled for processing as an independent
                thread. The <option ixia_locid="206" class="+ topic/keyword pr-d/option ">CPU Policy</option> extra specification
                involves two aspects of the scheduling process: the CPU affinity mask (that is, the
                conditions required for a target CPU to be eligible), and the CPU over-commit limit
                (an independent consideration that affects whether an otherwise eligible target CPU
                may be used.) The extra spec controls whether the virtual CPU thread can share a
                core with other vCPU threads.</p>
            <p ixia_locid="364" class="- topic/p ">Until this extra spec is explicitly defined, the effective default
                is <nameliteral ixia_locid="367" class="+ topic/ph hi-d/b wr-sw-d/nameliteral ">Shared</nameliteral> to permit sharing, subject to the over-commit
                limit. You can change this by adding the extra spec. When you do so using the web
                administration interface, the non-default policy <nameliteral ixia_locid="366" class="+ topic/ph hi-d/b wr-sw-d/nameliteral ">Dedicated</nameliteral> is offered automatically for convenience.</p>
            <p ixia_locid="205" class="- topic/p ">When the <option ixia_locid="207" class="+ topic/keyword pr-d/option ">CPU Policy</option> is set to
                    <nameliteral ixia_locid="208" class="+ topic/ph hi-d/b wr-sw-d/nameliteral ">Dedicated</nameliteral>, each virtual CPU thread
                is scheduled to run on a single core exclusively. The cores are removed from the
                shared resource pool, and each virtual CPU is scheduled to run as a dedicated thread
                on its corresponding target core. The cores are returned to the shared pool upon
                termination of the virtual machine.</p>
            <p ixia_locid="189" class="- topic/p ">Specifying <nameliteral ixia_locid="209" class="+ topic/ph hi-d/b wr-sw-d/nameliteral ">Dedicated</nameliteral>
                effectively affines each virtual CPU thread to a dedicated core, and ensures that
                the core is not shared with other virtual CPU threads.
                <!--When launching virtual machines on a HT-enabled compute node, this option affines each virtual CPU thread to a logical processor instead; therefore, as many threads as logical processors are available can be scheduled to run on the same core. See <cite ixia_locid="185">HT-Enabled Compute Nodes</cite> in <xref href="jow1404333563170.xml" ixia_locid="187"/> for further information.-->
                The <nameliteral ixia_locid="211" class="+ topic/ph hi-d/b wr-sw-d/nameliteral ">Dedicated</nameliteral> setting is recommended for
                Carrier-Grade requirements to prevent over-commitment of host resources, and to
                minimize the impact that scheduling events may have on the latency and throughput
                responses of the guest kernel. </p>
            <note id="note_N10058_N10022_N1001F_N10001" ixia_locid="360" class="- topic/note ">
                <p ixia_locid="361" class="- topic/p ">The <nameliteral ixia_locid="362" class="+ topic/ph hi-d/b wr-sw-d/nameliteral ">Dedicated</nameliteral> setting is also required for CPU
                    scaling.</p>
            </note>
            <p ixia_locid="251" class="- topic/p ">When the <option ixia_locid="212" class="+ topic/keyword pr-d/option ">CPU Policy</option> is
                    <nameliteral ixia_locid="213" class="+ topic/ph hi-d/b wr-sw-d/nameliteral ">Shared</nameliteral>, the virtual CPU threads are
                scheduled to run on any available core on the compute node. Also, they can be moved
                within the compute node from one core to another at any time. In a sense, the
                virtual CPU threads can be considered to be floating threads. This is the CPU
                affinity mask portion of the scheduling action.</p>
            <p ixia_locid="253" class="- topic/p ">Additionally, the virtual CPU threads can share the core with other
                threads from the same virtual machine or other virtual machines. The default
                OpenStack virtual CPU over-commit ratio is 16:1, which means that up to 16 virtual
                CPU threads can share a single core. Over-committing of virtual CPUs is highly
                discouraged in Carrier-Grade operations.</p>
            <p ixia_locid="17" class="- topic/p ">To add this extra spec to a flavor using the web administration
                interface, use the <uicontrol ixia_locid="314" class="+ topic/ph ui-d/uicontrol ">CPU Policy</uicontrol> selection in
                the <uicontrol ixia_locid="316" class="+ topic/ph ui-d/uicontrol ">Create Flavor Extra Spec</uicontrol> drop-down menu.
                To access this menu, see <xref href="jow1429538642910.xml" ixia_locid="318" class="- topic/xref "/>.</p>
            <p ixia_locid="308" class="- topic/p ">To add the extra spec using the CLI, use the following command:</p>
            <codeblock ixia_locid="315" class="+ topic/pre pr-d/codeblock "><systemoutput ixia_locid="322" class="+ topic/ph sw-d/systemoutput ">~(keystone_admin)$ </systemoutput><userinput ixia_locid="329" class="+ topic/ph sw-d/userinput ">nova flavor-key <varname ixia_locid="336" class="+ topic/keyword sw-d/varname ">flavor_name</varname> set hw:cpu_policy=<varname ixia_locid="347" class="+ topic/keyword sw-d/varname ">policy</varname></userinput></codeblock>
            <p ixia_locid="231" class="- topic/p ">where <varname ixia_locid="232" class="+ topic/keyword sw-d/varname ">policy</varname> is either <option ixia_locid="354" class="+ topic/keyword pr-d/option ">dedicated</option> or <option ixia_locid="355" class="+ topic/keyword pr-d/option ">shared</option>.
                If any other value is suppied, the policy is set to
                    <nameliteral ixia_locid="368" class="+ topic/ph hi-d/b wr-sw-d/nameliteral ">Dedicated</nameliteral>.</p>
            <note id="note_N10271_N101E7_N101DE_N101C7_N1014F_N1001F_N10001" ixia_locid="235" class="- topic/note ">
                <p ixia_locid="217" class="- topic/p ">Using a single compute node for both shared and dedicated
                    threads is not recommended. For clusters that must support threads of both
                    types, use a host aggregate for each
                    type.<!-- JO 2015-03-13 Chris F suggests adding "in combination with the AggregateInstanceExtraSpecsFilter scheduler filter." -->
                    For more information, see <xref href="jow1426182913166.xml" ixia_locid="218" class="- topic/xref "/>.</p>
            </note>
        </context>
    </taskbody>
</task-wr>