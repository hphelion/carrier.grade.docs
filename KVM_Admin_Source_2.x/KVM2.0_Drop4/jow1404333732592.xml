<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE concept-wr PUBLIC "-//WindRiver.com//DTD DITA 1.2 Wind River Concept//EN" "concept-wr.dtd">
<concept-wr domains="(topic concept concept-wr)                            (topic hi-d)                            (topic indexing-d)                            (topic pr-d)                            (topic sw-d)                            (topic ui-d)                            (topic wr-sw-d)                            (topic xml-d)   " id="jow1404333732592" xml:lang="en-us" xmlns:ditaarch="http://dita.oasis-open.org/architecture/2005/">
    <title ixia_locid="1">The Ethernet MTU</title>
    <shortdesc ixia_locid="2">The Maximum Transmission Unit (MTU) of an Ethernet frame is a
        configurable attribute in HP Helion OpenStack Carrier Grade. Changing its default size must be done in
        coordination with other network elements on the Ethernet link.</shortdesc>
    <prolog>
        <author ixia_locid="42">Jim Owens</author>
        <author></author>
    </prolog>
    <conbody>
        <p ixia_locid="52">In the context of HP Helion OpenStack Carrier Grade, the Maximum Transmission Unit (MTU)
            refers to the largest possible payload on the Ethernet frame on a particular network
            link. The payload is enclosed by the Ethernet header (14 bytes) and the CRC (4 bytes),
            resulting in an Ethernet frame that is 18 bytes longer than the MTU size. </p>
        <p ixia_locid="5">The original IEEE 802.3 specification defines a valid standard Ethernet
            frame size to be from 64 to 1518 bytes, accommodating payloads ranging in size from 46
            to 1500 bytes. Ethernet frames with a payload larger than 1500 bytes are considered to
            be jumbo frames.</p>
        <p ixia_locid="53">For a VLAN network, the frame also includes a 4-byte VLAN ID header,
            resulting in a frame size 22 bytes longer than the MTU size.</p>
        <p ixia_locid="49">For a VXLAN network, the frame is either 54 or 74 bytes longer, depending
            on whether IPv4 or IPv6 protocol is used. This is because, in addition to the Ethernet
            header and CRC, the payload is enclosed by an IP header (20 bytes for Ipv4 or 40 bytes
            for IPv6), a UDP header (8 bytes), and a VXLAN header (8 bytes). </p>
        <p ixia_locid="6">In HP Helion OpenStack Carrier Grade, you can configure the MTU size for the following
            interfaces and networks: </p>
        <ul id="ul_qmn_yvn_m4">
            <li ixia_locid="43">
                <p ixia_locid="44">The management, OAM, and infrastructure network interfaces on the
                    controller. The MTU size for these interfaces is set during initial
                    installation. You can update the infrastructure interface MTU for the
                    controller from the web administration interface or the
                    CLI.<!-- JO Where can the user find more about this? --></p>
            </li>
            <li ixia_locid="7">
                <p ixia_locid="8">Data interfaces on compute nodes. For more information, see the
                        <cite ixia_locid="38">Compute Node</cite> entry in <xref href="jow1404333563170.xml" ixia_locid="39"/>.<!-- JO For future reference, a link to an id at the relevant element [e.g. <xref href="jow1404333563170.xml#jow1404333563170/compute-node-definition"] doesn't work for the PDF output (the page number is not included). --></p>
            </li>
            <li ixia_locid="9">
                <p ixia_locid="10">Provider networks. For more information, see the <cite ixia_locid="40">Provider Networks</cite> entry in <xref href="jow1404333563170.xml" ixia_locid="41"/>.</p>
            </li>
        </ul>
        <p ixia_locid="11">In all cases, the default MTU size is 1500. The minimum value is 576, and
            the maximum is 9216.<!-- JO according to Allain. --></p>
        <p ixia_locid="12">Since data interfaces are defined over physical interfaces connecting to
            provider networks, it is important to consider the implications of modifying the default
            MTU size:</p>
        <ul id="ul_hsq_2f4_m4">
            <li ixia_locid="13">
                <p ixia_locid="14">The MTU sizes for a data interface and the corresponding Ethernet
                    interface on the edge router or switch must be compatible. You must ensure that
                    each side of the link is configured to accept the maximum frame size that can be
                    delivered from the other side. For example, if the data interface is configured
                    with a MTU size of 9216 bytes, the corresponding switch interface must be
                    configured to accept a maximum frame size of 9238 bytes, assuming a VLAN tag is
                    present.</p>
                <p ixia_locid="15">The way switch interfaces are configured varies from one switch
                    manufacturer to another. In some cases you configure the MTU size directly,
                    while in some others you configure the maximum Ethernet frame size instead. In
                    the latter case, it is often unclear whether the frame size includes VLAN
                    headers or not. In any case, you must ensure that both sides are configured to
                    accept the expected maximum frame sizes.</p>
            </li>
            <li ixia_locid="50">
                <p ixia_locid="51">For a VXLAN network, the additional IP, UDP, and VXLAN headers
                    are invisible to the data interface, which expects a frame only 18 bytes larger
                    than the MTU. To accommodate the larger frames on a VXLAN network, you must
                    specify a larger nominal MTU on the data interface. For simplicity, and to avoid
                    issues with stacked VLAN tagging, some third party vendors recommend rounding up
                    by an additional 100 bytes for calculation purposes. For example, to attach to a
                    VXLAN provider network with an MTU of 1500, a data interface with an MTU of 1600
                    is recommended.</p>
            </li>
            <li ixia_locid="16">
                <p ixia_locid="17">A provider network can only be associated with a compute node data interface with an MTU of
     equal or greater value. </p>
            </li>
            <li ixia_locid="18">
                <p ixia_locid="19">The MTU size of a compute node data interface cannot be modified
                    to be less than the MTU size of any of its associated provider networks.</p>
            </li>
            <li ixia_locid="20">
                <p ixia_locid="21">The MTU size of a provider network can be modified only when there are no tenant networks
     that depend on the provider network.</p>
            </li>
            <li ixia_locid="22">
                <p ixia_locid="23">The MTU size of a provider network is automatically propagated up to any derived tenant
     networks.</p>
            </li>
            <li ixia_locid="24">
                <p ixia_locid="25">The Neutron L3 and DHCP agents automatically propagate the MTU size of their networks to
     their Linux network interfaces.</p>
            </li>
            <li ixia_locid="26">
                <p ixia_locid="27">The Neutron DHCP agent makes the option <option ixia_locid="28">interface-mtu</option> available to any DHCP
     client request from a virtual machine. The request response from the server is the current
     interface's MTU size, which can then be used by the client to adjust its own interface MTU
     size. </p>
            </li>
            <li ixia_locid="29">
                <p ixia_locid="30">The AVS prevents any AVP-Kernel or AVP-DPDK instances from setting a link MTU size that
     exceeds the maximum allowed on the corresponding tenant network. No such verification is
     available for virtio VM instances.</p>
            </li>
        </ul>
        <p ixia_locid="31">You can configure the MTU size from the web management interface when creating or modifying
   data interfaces and provider networks. On the CLI, use the option <option ixia_locid="32">--mtu</option> to
   modify the MTU size. For example:</p>
        <codeblock ixia_locid="33"><systemoutput ixia_locid="47">~(keystone_admin)$ </systemoutput><userinput ixia_locid="35">neutron providernet-create common-net --type vlan --mtu 9216</userinput></codeblock>
        <p ixia_locid="36">This command creates a provider network named <nameliteral ixia_locid="37">common-net</nameliteral> with an MTU size of 9216 bytes.</p>
    </conbody>
</concept-wr>